

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/wanye.jpg">
  <link rel="icon" href="/img/wanye.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="å°æ—¥æœˆ">
  <meta name="keywords" content="">
  
    <meta name="description" content="ğŸ­ é¢è¯•-js1.ajax æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆå®ç°çš„ï¼Ÿæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ(fetch å’Œ xmlhttprequest) AJAXï¼ˆAsynchronous JavaScript and XMLï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå¼‚æ­¥æ•°æ®äº¤äº’çš„æŠ€æœ¯ã€‚å®ƒå…è®¸åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œæ›´æ–°éƒ¨åˆ†é¡µé¢å†…å®¹ã€‚  å®ç°æ–¹å¼ åˆ›å»º ajax å¯¹è±¡ï¼ˆXMLHttpRequest&amp;#x2">
<meta property="og:type" content="article">
<meta property="og:title" content="interview-js-2">
<meta property="og:url" content="http://example.com/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/index.html">
<meta property="og:site_name" content="å°æ—¥æœˆçš„åšå®¢">
<meta property="og:description" content="ğŸ­ é¢è¯•-js1.ajax æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆå®ç°çš„ï¼Ÿæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ(fetch å’Œ xmlhttprequest) AJAXï¼ˆAsynchronous JavaScript and XMLï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå¼‚æ­¥æ•°æ®äº¤äº’çš„æŠ€æœ¯ã€‚å®ƒå…è®¸åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œæ›´æ–°éƒ¨åˆ†é¡µé¢å†…å®¹ã€‚  å®ç°æ–¹å¼ åˆ›å»º ajax å¯¹è±¡ï¼ˆXMLHttpRequest&amp;#x2">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/reflow.png">
<meta property="og:image" content="http://example.com/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/q1.png">
<meta property="og:image" content="http://example.com/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/q2.png">
<meta property="og:image" content="http://example.com/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/q3.png">
<meta property="og:image" content="http://example.com/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/x1.png">
<meta property="og:image" content="http://example.com/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/x2.png">
<meta property="article:published_time" content="2024-01-30T05:15:40.000Z">
<meta property="article:modified_time" content="2024-02-17T13:28:35.848Z">
<meta property="article:author" content="å°æ—¥æœˆ">
<meta property="article:tag" content="interview-js-2">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/reflow.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>interview-js-2 - å°æ—¥æœˆçš„åšå®¢</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":true,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 80vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>å°æ—¥æœˆ</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
            
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
            
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
            
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
            
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
            
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
          
          
            
          
            <li class="nav-item">
              <a class="nav-link" href="/example/">
                <i class="iconfont icon-image"></i>
                echarts
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/example1.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="interview-js-2"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-01-30 13:15" pubdate>
          2024å¹´1æœˆ30æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          22k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          182 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> æ¬¡
        </span>
        
      
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">interview-js-2</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="ğŸ­-é¢è¯•-js"><a href="#ğŸ­-é¢è¯•-js" class="headerlink" title="ğŸ­ é¢è¯•-js"></a>ğŸ­ é¢è¯•-js</h1><h2 id="1-ajax-æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆå®ç°çš„ï¼Ÿæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ-fetch-å’Œ-xmlhttprequest"><a href="#1-ajax-æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆå®ç°çš„ï¼Ÿæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ-fetch-å’Œ-xmlhttprequest" class="headerlink" title="1.ajax æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆå®ç°çš„ï¼Ÿæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ(fetch å’Œ xmlhttprequest)"></a>1.ajax æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆå®ç°çš„ï¼Ÿæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ(fetch å’Œ xmlhttprequest)</h2><blockquote>
<p>AJAXï¼ˆAsynchronous JavaScript and XMLï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå¼‚æ­¥æ•°æ®äº¤äº’çš„æŠ€æœ¯ã€‚å®ƒå…è®¸åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œæ›´æ–°éƒ¨åˆ†é¡µé¢å†…å®¹ã€‚</p>
</blockquote>
<h3 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h3><ol>
<li>åˆ›å»º ajax å¯¹è±¡ï¼ˆXMLHttpRequest&#x2F;ActiveXObject(Microsoft.XMLHttp)ï¼‰</li>
<li>ç”¨ open()æ–¹æ³•è®¾ç½®è¯·æ±‚æ–¹å¼å’Œè¯·æ±‚åœ°å€è¿æ¥æœåŠ¡å™¨</li>
<li>ç”¨ send()æ–¹æ³•å‘é€è¯·æ±‚</li>
<li>å½“ ajax å¯¹è±¡å®Œæˆç¬¬å››æ­¥ï¼ˆonreadystatechangeï¼‰æ•°æ®æ¥æ”¶å®Œæˆï¼Œåˆ¤æ–­ http å“åº”çŠ¶æ€ï¼ˆstatusï¼‰200-300 ä¹‹é—´æˆ–è€… 304ï¼ˆç¼“å­˜ï¼‰æ‰§è¡Œå›è°ƒå‡½æ•°</li>
<li>é€šè¿‡ ajax å¯¹è±¡çš„ responseText å±æ€§è·å–æœåŠ¡å™¨è¿”å›çš„æ•°æ®</li>
<li>å¤„ç†æ•°æ®æ›´æ–°é¡µé¢</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()<br>xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span> &amp;&amp; xhr.<span class="hljs-property">status</span> == <span class="hljs-number">200</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">responseText</span>)<br>  &#125;<br>&#125;<br>xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;example.com/api/data&#x27;</span>, <span class="hljs-literal">true</span>)<br>xhr.<span class="hljs-title function_">send</span>()<br></code></pre></td></tr></table></figure>

<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>å¼‚æ­¥é€šä¿¡ï¼š AJAX æ”¯æŒå¼‚æ­¥é€šä¿¡ï¼Œå¯ä»¥åœ¨ä¸é˜»å¡é¡µé¢çš„æƒ…å†µä¸‹å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</li>
<li>å±€éƒ¨æ›´æ–°ï¼š å¯ä»¥é€šè¿‡å±€éƒ¨æ›´æ–°é¡µé¢å†…å®¹ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚</li>
<li>å‡å°‘å¸¦å®½æ¶ˆè€—ï¼š åªä¼ è¾“éœ€è¦çš„æ•°æ®ï¼Œå‡å°‘äº†ä¸å¿…è¦çš„å¸¦å®½æ¶ˆè€—ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>æµè§ˆå™¨å…¼å®¹æ€§ï¼š æ—©æœŸæµè§ˆå™¨å¯¹ AJAX çš„æ”¯æŒä¸ä¸€è‡´ï¼Œä½†éšç€ç°ä»£æµè§ˆå™¨çš„æ™®åŠï¼Œè¿™ä¸ªé—®é¢˜é€æ¸å‡è½»ã€‚</li>
<li>SEO éš¾åº¦ï¼š æœç´¢å¼•æ“å¯¹äº AJAX åŠ è½½çš„å†…å®¹çš„ç´¢å¼•å’Œå¤„ç†ç›¸å¯¹å¤æ‚ï¼Œå¯èƒ½å½±å“æœç´¢å¼•æ“ä¼˜åŒ–ã€‚</li>
<li>å®‰å…¨æ€§ï¼š ç”±äºè·¨åŸŸè¯·æ±‚çš„å®‰å…¨æ€§é—®é¢˜ï¼Œå­˜åœ¨ä¸€äº›å®‰å…¨é£é™©ï¼Œéœ€è¦æ³¨æ„è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰ç­‰æ”»å‡»ã€‚</li>
</ol>
<h2 id="2-get-å’Œ-post-çš„åŒºåˆ«"><a href="#2-get-å’Œ-post-çš„åŒºåˆ«" class="headerlink" title="2. get å’Œ post çš„åŒºåˆ«"></a>2. get å’Œ post çš„åŒºåˆ«</h2><blockquote>
<p>GET ç”¨äºä»æœåŠ¡å™¨è·å–æ•°æ®<br><br>POST ç”¨äºå‘æœåŠ¡å™¨æäº¤æ•°æ®</p>
</blockquote>
<h3 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><p><strong>æ•°æ®æ–¹é¢</strong></p>
<ol>
<li>GET å‚æ•°é€šè¿‡ URL ä¼ é€’ï¼ŒPOST æ”¾åœ¨ Request body ä¸­</li>
<li>GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€Œ POST æ²¡æœ‰ã€‚</li>
<li>å¯¹å‚æ•°çš„æ•°æ®ç±»å‹ï¼ŒGET åªæ¥å— ASCII å­—ç¬¦ï¼Œè€Œ POST æ²¡æœ‰é™åˆ¶ã€‚</li>
<li>GET è¯·æ±‚åªèƒ½è¿›è¡Œ url ç¼–ç ï¼Œè€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚</li>
</ol>
<p><strong>å®‰å…¨æ–¹é¢</strong></p>
<ol>
<li>GET æ¯” POST æ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨ URL ä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚</li>
<li>POST å‚æ•°ä¸ä¼šè¢«ä¿å­˜åœ¨æµè§ˆå™¨å†å²æˆ– web æœåŠ¡å™¨æ—¥å¿—ä¸­ã€‚</li>
</ol>
<p><strong>ç¼“å­˜æ–¹é¢</strong></p>
<ol>
<li>GET åœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€Œ POST ä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚</li>
<li>GET äº§ç”Ÿçš„ URL åœ°å€å¯ä»¥è¢« Bookmarkï¼Œè€Œ POST ä¸å¯ä»¥ã€‚</li>
<li>GET è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ cacheï¼Œè€Œ POST ä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ã€‚</li>
<li>GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œè€Œ POST ä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚</li>
</ol>
<h2 id="3-promise-çš„å†…éƒ¨åŸç†å’Œä¼˜ç¼ºç‚¹"><a href="#3-promise-çš„å†…éƒ¨åŸç†å’Œä¼˜ç¼ºç‚¹" class="headerlink" title="3. promise çš„å†…éƒ¨åŸç†å’Œä¼˜ç¼ºç‚¹"></a>3. promise çš„å†…éƒ¨åŸç†å’Œä¼˜ç¼ºç‚¹</h2><h3 id="Promise-åŸºæœ¬ç‰¹æ€§"><a href="#Promise-åŸºæœ¬ç‰¹æ€§" class="headerlink" title="Promise åŸºæœ¬ç‰¹æ€§"></a>Promise åŸºæœ¬ç‰¹æ€§</h3><ol>
<li>Promise æœ‰ä¸‰ç§çŠ¶æ€ï¼špending(è¿›è¡Œä¸­)ã€fulfilled(å·²æˆåŠŸ)ã€rejected(å·²å¤±è´¥)</li>
<li>Promise å¯¹è±¡æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°, è¯¥å›è°ƒå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯æˆåŠŸæ—¶çš„å›è°ƒ resolve å’Œå¤±è´¥æ—¶çš„å›è°ƒ rejectï¼›å¦å¤– resolve çš„å‚æ•°é™¤äº†æ­£å¸¸å€¼ä»¥å¤–ï¼Œ è¿˜å¯èƒ½æ˜¯ä¸€ä¸ª Promise å¯¹è±¡çš„å®ä¾‹ï¼›reject çš„å‚æ•°é€šå¸¸æ˜¯ä¸€ä¸ª Error å¯¹è±¡çš„å®ä¾‹ã€‚</li>
<li>then æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œå¹¶æ¥æ”¶ä¸¤ä¸ªå‚æ•° onResolved(fulfilled çŠ¶æ€çš„å›è°ƒ)ï¼›onRejected(rejected çŠ¶æ€çš„å›è°ƒï¼Œè¯¥å‚æ•°å¯é€‰)</li>
<li>catch æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹</li>
<li>finally æ–¹æ³•ä¸ç®¡ Promise çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œï¼Œè¯¥æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°</li>
<li>Promise.all()æ–¹æ³•å°†å¤šä¸ªå¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªç”± Promise å¯¹è±¡ç»„æˆçš„æ•°ç»„ä½œä¸ºå‚æ•°(Promise.all()æ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰ Iterator æ¥å£ï¼Œä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®ä¾‹)ï¼Œæ³¨æ„å‚æ•°ä¸­åªè¦æœ‰ä¸€ä¸ªå®ä¾‹è§¦å‘ catch æ–¹æ³•ï¼Œéƒ½ä¼šè§¦å‘ Promise.all()æ–¹æ³•è¿”å›çš„æ–°çš„å®ä¾‹çš„ catch æ–¹æ³•ï¼Œå¦‚æœå‚æ•°ä¸­çš„æŸä¸ªå®ä¾‹æœ¬èº«è°ƒç”¨äº† catch æ–¹æ³•ï¼Œå°†ä¸ä¼šè§¦å‘ Promise.all()æ–¹æ³•è¿”å›çš„æ–°å®ä¾‹çš„ catch æ–¹æ³•</li>
<li>Promise.race()æ–¹æ³•çš„å‚æ•°ä¸ Promise.all æ–¹æ³•ä¸€æ ·ï¼Œå‚æ•°ä¸­çš„å®ä¾‹åªè¦æœ‰ä¸€ä¸ªç‡å…ˆæ”¹å˜çŠ¶æ€å°±ä¼šå°†è¯¥å®ä¾‹çš„çŠ¶æ€ä¼ ç»™ Promise.race()æ–¹æ³•ï¼Œå¹¶å°†è¿”å›å€¼ä½œä¸º Promise.race()æ–¹æ³•äº§ç”Ÿçš„ Promise å®ä¾‹çš„è¿”å›å€¼</li>
<li>Promise.resolve()å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡ï¼Œå¦‚æœè¯¥æ–¹æ³•çš„å‚æ•°ä¸ºä¸€ä¸ª Promise å¯¹è±¡ï¼ŒPromise.resolve()å°†ä¸åšä»»ä½•å¤„ç†ï¼›å¦‚æœå‚æ•° thenable å¯¹è±¡(å³å…·æœ‰ then æ–¹æ³•)ï¼ŒPromise.resolve()å°†è¯¥å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡å¹¶ç«‹å³æ‰§è¡Œ then æ–¹æ³•ï¼›å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡ï¼Œåˆ™ Promise.resolve æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º fulfilledï¼Œå…¶å‚æ•°å°†ä¼šä½œä¸º then æ–¹æ³•ä¸­ onResolved å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œå¦‚æœ Promise.resolve æ–¹æ³•ä¸å¸¦å‚æ•°ï¼Œä¼šç›´æ¥è¿”å›ä¸€ä¸ª fulfilled çŠ¶æ€çš„ Promise å¯¹è±¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç«‹å³ resolve()çš„ Promise å¯¹è±¡ï¼Œæ˜¯åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€ï¼ˆevent loopï¼‰çš„ç»“æŸæ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€çš„å¼€å§‹æ—¶ã€‚</li>
<li>Promise.reject()åŒæ ·è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º rejectedï¼Œæ— è®ºä¼ å…¥ä»»ä½•å‚æ•°éƒ½å°†ä½œä¸º reject()çš„å‚æ•°</li>
</ol>
<h3 id="Promise-ä¼˜ç‚¹"><a href="#Promise-ä¼˜ç‚¹" class="headerlink" title="Promise ä¼˜ç‚¹"></a>Promise ä¼˜ç‚¹</h3><ol>
<li>ç»Ÿä¸€å¼‚æ­¥ API<br>Promise çš„ä¸€ä¸ªé‡è¦ä¼˜ç‚¹æ˜¯å®ƒå°†é€æ¸è¢«ç”¨ä½œæµè§ˆå™¨çš„å¼‚æ­¥ API ï¼Œç»Ÿä¸€ç°åœ¨å„ç§å„æ ·çš„ API ï¼Œä»¥åŠä¸å…¼å®¹çš„æ¨¡å¼å’Œæ‰‹æ³•ã€‚</li>
<li>Promise ä¸äº‹ä»¶å¯¹æ¯”<br>å’Œäº‹ä»¶ç›¸æ¯”è¾ƒï¼Œ Promise æ›´é€‚åˆå¤„ç†ä¸€æ¬¡æ€§çš„ç»“æœã€‚åœ¨ç»“æœè®¡ç®—å‡ºæ¥ä¹‹å‰æˆ–ä¹‹åæ³¨å†Œå›è°ƒå‡½æ•°éƒ½æ˜¯å¯ä»¥çš„ï¼Œéƒ½å¯ä»¥æ‹¿åˆ°æ­£ç¡®çš„å€¼ã€‚ Promise çš„è¿™ä¸ªä¼˜ç‚¹å¾ˆè‡ªç„¶ã€‚ä½†æ˜¯ï¼Œä¸èƒ½ä½¿ç”¨ Promise å¤„ç†å¤šæ¬¡è§¦å‘çš„äº‹ä»¶ã€‚é“¾å¼å¤„ç†æ˜¯ Promise çš„åˆä¸€ä¼˜ç‚¹ï¼Œä½†æ˜¯äº‹ä»¶å´ä¸èƒ½è¿™æ ·é“¾å¼å¤„ç†ã€‚</li>
<li>Promise ä¸å›è°ƒå¯¹æ¯”<br>è§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œå°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ã€‚</li>
<li>Promise å¸¦æ¥çš„é¢å¤–å¥½å¤„æ˜¯åŒ…å«äº†æ›´å¥½çš„é”™è¯¯å¤„ç†æ–¹å¼ï¼ˆåŒ…å«äº†å¼‚å¸¸å¤„ç†ï¼‰ï¼Œå¹¶ä¸”å†™èµ·æ¥å¾ˆè½»æ¾ï¼ˆå› ä¸ºå¯ä»¥é‡ç”¨ä¸€äº›åŒæ­¥çš„å·¥å…·ï¼Œæ¯”å¦‚ Array.prototype.map() ï¼‰ã€‚</li>
</ol>
<h3 id="Promise-ç¼ºç‚¹"><a href="#Promise-ç¼ºç‚¹" class="headerlink" title="Promise ç¼ºç‚¹"></a>Promise ç¼ºç‚¹</h3><ol>
<li>æ— æ³•å–æ¶ˆ Promiseï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚</li>
<li>å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼ŒPromise å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚</li>
<li>å½“å¤„äº Pending çŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ã€‚</li>
<li>Promise çœŸæ­£æ‰§è¡Œå›è°ƒçš„æ—¶å€™ï¼Œå®šä¹‰ Promise é‚£éƒ¨åˆ†å®é™…ä¸Šå·²ç»èµ°å®Œäº†ï¼Œæ‰€ä»¥ Promise çš„æŠ¥é”™å †æ ˆä¸Šä¸‹æ–‡ä¸å¤ªå‹å¥½ã€‚</li>
</ol>
<h3 id="æ‰‹å†™-Promise"><a href="#æ‰‹å†™-Promise" class="headerlink" title="æ‰‹å†™ Promise"></a>æ‰‹å†™ Promise</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PENDING</span> = <span class="hljs-string">&#x27;pending&#x27;</span><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">FULFILLED</span> = <span class="hljs-string">&#x27;fulfilled&#x27;</span><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">REJECTED</span> = <span class="hljs-string">&#x27;rejected&#x27;</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">resolvePromise</span> = (<span class="hljs-params">promise, x, resolve, reject</span>) =&gt; &#123;<br>  <span class="hljs-keyword">if</span> (x === promise) &#123;<br>    <span class="hljs-comment">// If promise and x refer to the same object, reject promise with a TypeError as the reason.</span><br>    <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&#x27;å¾ªç¯å¼•ç”¨&#x27;</span>))<br>  &#125;<br>  <span class="hljs-comment">// if x is an object or function,</span><br>  <span class="hljs-keyword">if</span> ((x !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">typeof</span> x === <span class="hljs-string">&#x27;object&#x27;</span>) || <span class="hljs-keyword">typeof</span> x === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>    <span class="hljs-comment">// If both resolvePromise and rejectPromise are called, or multiple calls to the same argument are made, the first call takes precedence, and any further calls are ignored.</span><br>    <span class="hljs-keyword">let</span> called<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-comment">// If retrieving the property x.then results in a thrown exception e, reject promise with e as the reason.</span><br>      <span class="hljs-keyword">let</span> then = x.<span class="hljs-property">then</span> <span class="hljs-comment">// Let then be x.then</span><br>      <span class="hljs-comment">// If then is a function, call it with x as this</span><br>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> then === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>        <span class="hljs-comment">// If/when resolvePromise is called with a value y, run [[Resolve]](promise, y)</span><br>        <span class="hljs-comment">// If/when rejectPromise is called with a reason r, reject promise with r.</span><br>        then.<span class="hljs-title function_">call</span>(<br>          x,<br>          <span class="hljs-function">(<span class="hljs-params">y</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span><br>            called = <span class="hljs-literal">true</span><br>            <span class="hljs-title function_">resolvePromise</span>(promise, y, resolve, reject)<br>          &#125;,<br>          <span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span><br>            called = <span class="hljs-literal">true</span><br>            <span class="hljs-title function_">reject</span>(r)<br>          &#125;<br>        )<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// If then is not a function, fulfill promise with x.</span><br>        <span class="hljs-title function_">resolve</span>(x)<br>      &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>      <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span><br>      called = <span class="hljs-literal">true</span><br>      <span class="hljs-title function_">reject</span>(e)<br>    &#125;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// If x is not an object or function, fulfill promise with x</span><br>    <span class="hljs-title function_">resolve</span>(x)<br>  &#125;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Promise</span>(<span class="hljs-params">excutor</span>) &#123;<br>  <span class="hljs-keyword">let</span> that = <span class="hljs-variable language_">this</span> <span class="hljs-comment">// ç¼“å­˜å½“å‰promiseå®ä¾‹ä¾‹å¯¹è±¡</span><br>  that.<span class="hljs-property">status</span> = <span class="hljs-variable constant_">PENDING</span> <span class="hljs-comment">// åˆå§‹çŠ¶æ€</span><br>  that.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span> <span class="hljs-comment">// fulfilledçŠ¶æ€æ—¶ è¿”å›çš„ä¿¡æ¯</span><br>  that.<span class="hljs-property">reason</span> = <span class="hljs-literal">undefined</span> <span class="hljs-comment">// rejectedçŠ¶æ€æ—¶ æ‹’ç»çš„åŸå› </span><br>  that.<span class="hljs-property">onFulfilledCallbacks</span> = [] <span class="hljs-comment">// å­˜å‚¨fulfilledçŠ¶æ€å¯¹åº”çš„onFulfilledå‡½æ•°</span><br>  that.<span class="hljs-property">onRejectedCallbacks</span> = [] <span class="hljs-comment">// å­˜å‚¨rejectedçŠ¶æ€å¯¹åº”çš„onRejectedå‡½æ•°</span><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-params">value</span>) &#123;<br>    <span class="hljs-comment">// valueæˆåŠŸæ€æ—¶æ¥æ”¶çš„ç»ˆå€¼</span><br>    <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Promise</span>) &#123;<br>      <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">then</span>(resolve, reject)<br>    &#125;<br>    <span class="hljs-comment">// å®è·µä¸­è¦ç¡®ä¿ onFulfilled å’Œ onRejected â½…æ–¹æ³•å¼‚æ­¥æ‰§â¾è¡Œè¡Œï¼Œä¸”åº”è¯¥åœ¨ then â½…æ–¹æ³•è¢«è°ƒâ½¤ç”¨çš„é‚£â¼€ä¸€è½®äº‹ä»¶å¾ªç¯ä¹‹åçš„æ–°æ‰§â¾è¡Œè¡Œæ ˆä¸­æ‰§â¾è¡Œè¡Œã€‚</span><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-comment">// è°ƒâ½¤ç”¨resolve å›è°ƒå¯¹åº”onFulfilledå‡½æ•°</span><br>      <span class="hljs-keyword">if</span> (that.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">PENDING</span>) &#123;<br>        <span class="hljs-comment">// åªèƒ½ç”±pendingçŠ¶æ€ =&gt; fulfilledçŠ¶æ€ (é¿å…è°ƒâ½¤ç”¨å¤šæ¬¡resolve reject)</span><br>        that.<span class="hljs-property">status</span> = <span class="hljs-variable constant_">FULFILLED</span><br>        that.<span class="hljs-property">value</span> = value<br>        that.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> <span class="hljs-title function_">cb</span>(that.<span class="hljs-property">value</span>))<br>      &#125;<br>    &#125;)<br>  &#125;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">reject</span>(<span class="hljs-params">reason</span>) &#123;<br>    <span class="hljs-comment">// reasonå¤±è´¥æ€æ—¶æ¥æ”¶çš„æ‹’å› </span><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-comment">// è°ƒâ½¤ç”¨reject å›è°ƒå¯¹åº”onRejectedå‡½æ•°</span><br>      <span class="hljs-keyword">if</span> (that.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">PENDING</span>) &#123;<br>        <span class="hljs-comment">// åªèƒ½ç”±pendingçŠ¶æ€ =&gt; rejectedçŠ¶æ€ (é¿å…è°ƒâ½¤ç”¨å¤šæ¬¡resolve reject)</span><br>        that.<span class="hljs-property">status</span> = <span class="hljs-variable constant_">REJECTED</span><br>        that.<span class="hljs-property">reason</span> = reason<br>        that.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> <span class="hljs-title function_">cb</span>(that.<span class="hljs-property">reason</span>))<br>      &#125;<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-comment">// æ•è·åœ¨excutoræ‰§â¾è¡Œè¡Œå™¨å™¨ä¸­æŠ›å‡ºçš„å¼‚å¸¸</span><br>  <span class="hljs-comment">// new Promise((resolve, reject) =&gt; &#123;</span><br>  <span class="hljs-comment">//     throw new Error(&#x27;error in excutor&#x27;)</span><br>  <span class="hljs-comment">// &#125;)</span><br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-title function_">excutor</span>(resolve, reject)<br>  &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>    <span class="hljs-title function_">reject</span>(e)<br>  &#125;<br>&#125;<br><span class="hljs-title class_">Promise</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">then</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onFulfilled, onRejected</span>) &#123;<br>  <span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span><br>  <span class="hljs-keyword">let</span> newPromise<br>  <span class="hljs-comment">// å¤„ç†ç†å‚æ•°é»˜è®¤å€¼ ä¿è¯å‚æ•°åç»­èƒ½å¤Ÿç»§ç»­æ‰§â¾è¡Œè¡Œ</span><br>  onFulfilled =<br>    <span class="hljs-keyword">typeof</span> onFulfilled === <span class="hljs-string">&#x27;function&#x27;</span> ? onFulfilled : <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> value<br>  onRejected =<br>    <span class="hljs-keyword">typeof</span> onRejected === <span class="hljs-string">&#x27;function&#x27;</span><br>      ? onRejected<br>      : <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">throw</span> reason<br>        &#125;<br>  <span class="hljs-keyword">if</span> (that.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">FULFILLED</span>) &#123;<br>    <span class="hljs-comment">// æˆåŠŸæ€</span><br>    <span class="hljs-keyword">return</span> (newPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">let</span> x = <span class="hljs-title function_">onFulfilled</span>(that.<span class="hljs-property">value</span>)<br>          <span class="hljs-title function_">resolvePromise</span>(newPromise, x, resolve, reject) <span class="hljs-comment">//æ–°çš„promise resolve ä¸Šâ¼€ä¸€ä¸ªonFulfilledçš„è¿”å›å€¼</span><br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>          <span class="hljs-title function_">reject</span>(e) <span class="hljs-comment">// æ•è·å‰â¾¯é¢onFulfilledä¸­æŠ›å‡ºçš„å¼‚å¸¸then(onFulfilled, onRejected);</span><br>        &#125;<br>      &#125;)<br>    &#125;))<br>  &#125;<br>  <span class="hljs-keyword">if</span> (that.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">REJECTED</span>) &#123;<br>    <span class="hljs-comment">// å¤±è´¥æ€</span><br>    <span class="hljs-keyword">return</span> (newPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">let</span> x = <span class="hljs-title function_">onRejected</span>(that.<span class="hljs-property">reason</span>)<br>          <span class="hljs-title function_">resolvePromise</span>(newPromise, x, resolve, reject)<br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>          <span class="hljs-title function_">reject</span>(e)<br>        &#125;<br>      &#125;)<br>    &#125;))<br>  &#125;<br>  <span class="hljs-keyword">if</span> (that.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">PENDING</span>) &#123;<br>    <span class="hljs-comment">// ç­‰å¾…æ€</span><br>    <span class="hljs-comment">// å½“å¼‚æ­¥è°ƒâ½¤ç”¨resolve/rejectedæ—¶ å°†onFulfilled/onRejectedæ”¶é›†æš‚å­˜åˆ°é›†åˆä¸­</span><br>    <span class="hljs-keyword">return</span> (newPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      that.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">let</span> x = <span class="hljs-title function_">onFulfilled</span>(value)<br>          <span class="hljs-title function_">resolvePromise</span>(newPromise, x, resolve, reject)<br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>          <span class="hljs-title function_">reject</span>(e)<br>        &#125;<br>      &#125;)<br>      that.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">let</span> x = <span class="hljs-title function_">onRejected</span>(reason)<br>          <span class="hljs-title function_">resolvePromise</span>(newPromise, x, resolve, reject)<br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>          <span class="hljs-title function_">reject</span>(e)<br>        &#125;<br>      &#125;)<br>    &#125;))<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="4-promise-å’Œ-async-x2F-await-çš„åŒºåˆ«"><a href="#4-promise-å’Œ-async-x2F-await-çš„åŒºåˆ«" class="headerlink" title="4. promise å’Œ async&#x2F;await çš„åŒºåˆ«"></a>4. promise å’Œ async&#x2F;await çš„åŒºåˆ«</h2><h3 id="åŒ"><a href="#åŒ" class="headerlink" title="åŒ"></a>åŒ</h3><ol>
<li>éƒ½æ˜¯å¤„ç†å¼‚æ­¥è¯·æ±‚</li>
<li>async è¿”å›çš„æ˜¯ä¸€ä¸ª promise å¯¹è±¡</li>
</ol>
<h3 id="å¼‚"><a href="#å¼‚" class="headerlink" title="å¼‚"></a>å¼‚</h3><ol>
<li>promise æ˜¯ es6,async&#x2F;await æ˜¯ es7</li>
<li>async&#x2F;await æ˜¯åŸºäº promise çš„ï¼Œæ˜¯ promise çš„è¯­æ³•ç³–</li>
<li>async&#x2F;await ä½¿å¾—å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œé¿å…äº†å›è°ƒåœ°ç‹±</li>
<li>async&#x2F;await å¯ä»¥æ•è· promise çš„å¼‚å¸¸ï¼Œpromise éœ€è¦ä½¿ç”¨ catch æ•è·å¼‚å¸¸</li>
</ol>
<h2 id="5-æµè§ˆå™¨çš„å­˜å‚¨æ–¹å¼æœ‰å“ªäº›"><a href="#5-æµè§ˆå™¨çš„å­˜å‚¨æ–¹å¼æœ‰å“ªäº›" class="headerlink" title="5. æµè§ˆå™¨çš„å­˜å‚¨æ–¹å¼æœ‰å“ªäº›"></a>5. æµè§ˆå™¨çš„å­˜å‚¨æ–¹å¼æœ‰å“ªäº›</h2><blockquote>
<p>cookies,localStorage,sessionStorage,indexedDB</p>
</blockquote>
<h3 id="cookies"><a href="#cookies" class="headerlink" title="cookies"></a>cookies</h3><blockquote>
<p>æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®</p>
</blockquote>
<ol>
<li>ç‰¹ç‚¹ï¼š å°å®¹é‡ï¼ˆé€šå¸¸é™åˆ¶åœ¨ 4KBï¼‰ã€æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæºå¸¦åˆ°æœåŠ¡å™¨ã€‚</li>
<li>ç”¨é€”ï¼š ç”¨äºå­˜å‚¨å°‘é‡çš„æ–‡æœ¬æ•°æ®ï¼Œä¾‹å¦‚ä¼šè¯ä¿¡æ¯ã€ç”¨æˆ·åå¥½è®¾ç½®ç­‰ã€‚</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼š å¯ä»¥è®¾ç½®å¤±æ•ˆæ—¶é—´ï¼Œå¦‚æœåœ¨æµè§ˆå™¨æ²¡æœ‰è®¾ç½®å¤±æ•ˆæ—¶é—´ï¼Œé‚£ä¹ˆ cookie å°†ä¼šåœ¨æµè§ˆå™¨å…³é—­æ—¶å¤±æ•ˆã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// APIï¼š é€šè¿‡ document.cookie è¿›è¡Œè¯»å†™ã€‚</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span> =<br>  <span class="hljs-string">&#x27;username=John Doe; expires=Thu, 18 Dec 2022 12:00:00 UTC; path=/&#x27;</span><br></code></pre></td></tr></table></figure>

<h3 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h3><blockquote>
<p>æœ¬åœ°å­˜å‚¨ç©ºé—´</p>
</blockquote>
<ol>
<li>ç‰¹ç‚¹ï¼š å¤§å®¹é‡ï¼ˆé€šå¸¸é™åˆ¶åœ¨ 5MBï¼‰ã€‚</li>
<li>ç”¨é€”ï¼š ç”¨äºå­˜å‚¨æœ¬åœ°æ•°æ®ï¼Œä¾‹å¦‚ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼š é™¤éè¢«æ¸…é™¤ï¼Œå¦åˆ™æ°¸ä¹…ä¿å­˜ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// APIï¼š é€šè¿‡ localStorage å¯¹è±¡è¿›è¡Œè¯»å†™ã€‚</span><br><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;username&#x27;</span>, <span class="hljs-string">&#x27;John Doe&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="sessionStorage"><a href="#sessionStorage" class="headerlink" title="sessionStorage"></a>sessionStorage</h3><blockquote>
<p>ä¼šè¯å­˜å‚¨ç©ºé—´</p>
</blockquote>
<ol>
<li>ç‰¹ç‚¹ï¼š å¤§å®¹é‡ï¼ˆé€šå¸¸é™åˆ¶åœ¨ 5MBï¼‰ã€‚</li>
<li>ç”¨é€”ï¼š ç”¨äºå­˜å‚¨æœ¬åœ°æ•°æ®ï¼Œä¾‹å¦‚ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼š ä»…åœ¨å½“å‰ä¼šè¯ä¸‹æœ‰æ•ˆï¼Œå…³é—­é¡µé¢æˆ–æµè§ˆå™¨åè¢«æ¸…é™¤ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// APIï¼š é€šè¿‡ sessionStorage å¯¹è±¡è¿›è¡Œè¯»å†™ã€‚</span><br>sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;username&#x27;</span>, <span class="hljs-string">&#x27;John Doe&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="indexedDB"><a href="#indexedDB" class="headerlink" title="indexedDB"></a>indexedDB</h3><blockquote>
<p>æµè§ˆå™¨æœ¬åœ°æ•°æ®åº“</p>
</blockquote>
<ol>
<li>å®¹é‡ï¼šç›¸å¯¹è¾ƒå¤§ï¼Œé€‚ç”¨äºå­˜å‚¨å¤§é‡ç»“æ„åŒ–æ•°æ®ã€‚</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼š æ°¸ä¹…å­˜å‚¨ï¼Œä¸å—ä¼šè¯å½±å“ã€‚</li>
<li>ç”¨é€”ï¼š ç”¨äºå­˜å‚¨å¤§é‡ç»“æ„åŒ–æ•°æ®ï¼Œä¾‹å¦‚æµè§ˆå™¨ç«¯ç¼“å­˜ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// APIï¼š é€šè¿‡ indexedDB å¯¹è±¡è¿›è¡Œè¯»å†™ã€‚</span><br><span class="hljs-keyword">var</span> request = indexedDB.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;MyTestDatabase&#x27;</span>)<br>request.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-comment">// é”™è¯¯å¤„ç†é€»è¾‘</span><br>&#125;<br>request.<span class="hljs-property">onsuccess</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-keyword">var</span> db = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span><br>  <span class="hljs-comment">// æˆåŠŸå¤„ç†é€»è¾‘</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="token-token-å­˜å‚¨åœ¨å“ªé‡Œ-token-æ€ä¹ˆä¼ é€’"><a href="#token-token-å­˜å‚¨åœ¨å“ªé‡Œ-token-æ€ä¹ˆä¼ é€’" class="headerlink" title="token,token å­˜å‚¨åœ¨å“ªé‡Œ,token æ€ä¹ˆä¼ é€’"></a>token,token å­˜å‚¨åœ¨å“ªé‡Œ,token æ€ä¹ˆä¼ é€’</h3><blockquote>
<p>Tokenï¼ˆä»¤ç‰Œï¼‰æ˜¯åœ¨èº«ä»½éªŒè¯ï¼ˆAuthenticationï¼‰å’Œæˆæƒï¼ˆAuthorizationï¼‰è¿‡ç¨‹ä¸­ç”¨äºéªŒè¯ç”¨æˆ·èº«ä»½çš„ä¸€ç§æ–¹å¼ã€‚(è®¿é—®èµ„æºå¯¹å‡­è¯)</p>
</blockquote>
<h3 id="å­˜å‚¨æ–¹å¼"><a href="#å­˜å‚¨æ–¹å¼" class="headerlink" title="å­˜å‚¨æ–¹å¼"></a>å­˜å‚¨æ–¹å¼</h3><ol>
<li>å­˜å‚¨åœ¨ localStorage ä¸­ï¼Œæ¯æ¬¡è°ƒç”¨æ¥å£çš„æ—¶å€™éƒ½æŠŠå®ƒå½“æˆä¸€ä¸ªå­—æ®µä¼ ç»™åå°</li>
<li>å­˜å‚¨åœ¨ cookie ä¸­ï¼Œè®©å®ƒè‡ªåŠ¨å‘é€ï¼Œä¸è¿‡ç¼ºç‚¹å°±æ˜¯ä¸èƒ½è·¨åŸŸ</li>
<li>æ‹¿åˆ°ä¹‹åå­˜å‚¨åœ¨ localStorage ä¸­ï¼Œæ¯æ¬¡è°ƒç”¨æ¥å£çš„æ—¶å€™æ”¾åœ¨ HTTP è¯·æ±‚å¤´çš„ Authorization å­—æ®µé‡Œé¢ã€‚</li>
</ol>
<h3 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h3><ol>
<li>ç”¨æˆ·ç™»å½•ï¼š ç”¨æˆ·æä¾›ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»å½•ã€‚</li>
<li>è®¤è¯æœåŠ¡å™¨éªŒè¯ï¼š æœåŠ¡å™¨éªŒè¯ç”¨æˆ·æä¾›çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼Œç”Ÿæˆä¸€ä¸ªä»¤ç‰Œã€‚</li>
<li>ä»¤ç‰Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼š æœåŠ¡å™¨å°†ç”Ÿæˆçš„ä»¤ç‰Œè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>å®¢æˆ·ç«¯å­˜å‚¨ä»¤ç‰Œï¼š å®¢æˆ·ç«¯é€šå¸¸å°†ä»¤ç‰Œå­˜å‚¨åœ¨æœ¬åœ°ï¼Œå¦‚æµè§ˆå™¨çš„ localStorageã€sessionStorage æˆ–è€…å†…å­˜ä¸­ã€‚</li>
<li>åç»­è¯·æ±‚æºå¸¦ä»¤ç‰Œï¼š å®¢æˆ·ç«¯åœ¨åç»­çš„è¯·æ±‚ä¸­æºå¸¦ä»¤ç‰Œï¼Œé€šå¸¸é€šè¿‡ HTTP å¤´éƒ¨çš„ Authorization å­—æ®µæˆ–è€…å…¶ä»–æ–¹å¼ã€‚</li>
</ol>
<h2 id="6-é¡µé¢æ¸²æŸ“çš„è¿‡ç¨‹"><a href="#6-é¡µé¢æ¸²æŸ“çš„è¿‡ç¨‹" class="headerlink" title="6. é¡µé¢æ¸²æŸ“çš„è¿‡ç¨‹"></a>6. é¡µé¢æ¸²æŸ“çš„è¿‡ç¨‹</h2><h3 id="1-DNS-æŸ¥è¯¢"><a href="#1-DNS-æŸ¥è¯¢" class="headerlink" title="1.DNS æŸ¥è¯¢"></a>1.DNS æŸ¥è¯¢</h3><p>DNSï¼ˆDomain Name Systemï¼‰æŸ¥è¯¢æ˜¯å°†ç”¨æˆ·è¾“å…¥çš„åŸŸåè½¬æ¢ä¸ºå¯¹åº”çš„ IP åœ°å€çš„è¿‡ç¨‹ã€‚å½“ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸ªç½‘å€æ—¶ï¼Œæµè§ˆå™¨ä¼šå‘æœ¬åœ° DNS æœåŠ¡å™¨å‘èµ·æŸ¥è¯¢è¯·æ±‚ï¼Œå¦‚æœæœ¬åœ° DNS æœåŠ¡å™¨ç¼“å­˜ä¸­æ²¡æœ‰å¯¹åº”çš„ IP åœ°å€ï¼Œå®ƒä¼šä¾æ¬¡å‘æ ¹åŸŸåæœåŠ¡å™¨ã€é¡¶çº§åŸŸåæœåŠ¡å™¨ã€æƒå¨åŸŸåæœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ï¼Œæœ€ç»ˆè·å¾—ç›®æ ‡åŸŸåå¯¹åº”çš„ IP åœ°å€ã€‚</p>
<h3 id="2-TCP-ä¸‰æ¬¡æ¡æ‰‹"><a href="#2-TCP-ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="2.TCP ä¸‰æ¬¡æ¡æ‰‹"></a>2.TCP ä¸‰æ¬¡æ¡æ‰‹</h3><ol>
<li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ SYN è¯·æ±‚ï¼š å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰ SYNï¼ˆåŒæ­¥ï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ï¼Œè¡¨æ˜å®¢æˆ·ç«¯å¸Œæœ›å»ºç«‹è¿æ¥ã€‚</li>
<li>æœåŠ¡å™¨å›åº” SYN+ACKï¼š æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN è¯·æ±‚åï¼Œä¼šå›åº”ä¸€ä¸ªå¸¦æœ‰ SYN å’Œ ACKï¼ˆç¡®è®¤ï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ï¼Œè¡¨æ˜æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„è¯·æ±‚å¹¶åŒæ„å»ºç«‹è¿æ¥ã€‚</li>
<li>å®¢æˆ·ç«¯å‘é€ ACKï¼š å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ SYN+ACK åï¼Œä¼šå‘é€ä¸€ä¸ªå¸¦æœ‰ ACK æ ‡å¿—çš„æ•°æ®åŒ…ï¼Œè¡¨ç¤ºè¿æ¥å»ºç«‹å®Œæˆã€‚</li>
</ol>
<h3 id="3-TLS-åå•†"><a href="#3-TLS-åå•†" class="headerlink" title="3.TLS åå•†"></a>3.TLS åå•†</h3><blockquote>
<p>TLSï¼ˆTransport Layer Securityï¼‰æ˜¯ä¸€ç§åŠ å¯†é€šä¿¡åè®®ï¼Œç”¨äºä¿æŠ¤æ•°æ®åœ¨ç½‘ç»œä¸Šä¼ è¾“çš„<br>å®‰å…¨æ€§ã€‚TLS åå•†æ˜¯åœ¨ TCP è¿æ¥å»ºç«‹åï¼Œè¿›è¡Œå®‰å…¨ä¼ è¾“é…ç½®çš„è¿‡ç¨‹ï¼š</p>
</blockquote>
<ol>
<li>å®¢æˆ·ç«¯å‘é€ ClientHelloï¼š å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€åŒ…å«æ”¯æŒçš„åŠ å¯†ç®—æ³•ç­‰ä¿¡æ¯çš„ ClientHello æŠ¥æ–‡ã€‚</li>
<li>æœåŠ¡å™¨å›åº” ServerHelloï¼š æœåŠ¡å™¨æ”¶åˆ° ClientHello åï¼Œé€‰æ‹©åˆé€‚çš„åŠ å¯†ç®—æ³•ï¼Œå¹¶å›åº”ä¸€ä¸ªåŒ…å«æœåŠ¡å™¨è¯ä¹¦çš„ ServerHello æŠ¥æ–‡ã€‚</li>
<li>åŒæ–¹åå•†å¯†é’¥ï¼š æœåŠ¡å™¨å‘é€ä¸€ä¸ªåŒ…å«å…¬é’¥çš„è¯ä¹¦ï¼Œå®¢æˆ·ç«¯éªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªé¢„ä¸»ç§˜å¯†ï¼ˆpre-master secretï¼‰ï¼Œä½¿ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†åå‘é€ç»™æœåŠ¡å™¨ã€‚åŒæ–¹ä½¿ç”¨é¢„ä¸»ç§˜å¯†ç”Ÿæˆå…±äº«çš„ä¸»ç§˜å¯†ã€‚</li>
<li>å®Œæˆåå•†ï¼š åŒæ–¹ä½¿ç”¨åå•†å¾—åˆ°çš„å¯†é’¥è¿›è¡ŒåŠ å¯†é€šä¿¡ï¼Œæ¡æ‰‹è¿‡ç¨‹å®Œæˆã€‚</li>
</ol>
<h3 id="4-é¡µé¢æ¸²æŸ“"><a href="#4-é¡µé¢æ¸²æŸ“" class="headerlink" title="4.é¡µé¢æ¸²æŸ“"></a>4.é¡µé¢æ¸²æŸ“</h3><img src="/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/reflow.png" srcset="/img/loading.gif" lazyload class title="This is an test image">

<ol>
<li>æ„å»º DOM æ ‘ï¼š<br>æ¸²æŸ“å¼•æ“ä½¿ç”¨ HTML è§£æå™¨ï¼ˆè°ƒç”¨ XML è§£æå™¨ï¼‰è§£æ HTML æ–‡æ¡£ï¼Œå°†å„ä¸ª HTML å…ƒç´ é€ä¸ªè½¬åŒ–æˆ DOM èŠ‚ç‚¹ï¼Œä»è€Œç”Ÿæˆ DOM æ ‘ï¼›<br>HTML æ ‡è®°è¢«è§£æä¸º DOM èŠ‚ç‚¹ï¼Œå½¢æˆæ ‘çŠ¶ç»“æ„ï¼Œè¡¨ç¤ºæ–‡æ¡£çš„å±‚æ¬¡ç»“æ„ã€‚</li>
<li>æ„å»º CSSOM æ ‘ï¼š<br>CSS è§£æå™¨è§£æ CSSï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸º CSS å¯¹è±¡ï¼Œå°†è¿™äº› CSS å¯¹è±¡ç»„è£…èµ·æ¥ï¼Œæ„å»º CSSOM æ ‘ï¼›<br>CSSOM æ ‘è¡¨ç¤ºæ–‡æ¡£ä¸­çš„æ ·å¼ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ ·å¼çš„è§„åˆ™å’Œå±‚æ¬¡å…³ç³»ã€‚</li>
<li>åˆå¹¶ DOM å’Œ CSSOM æ ‘ä¸ºæ¸²æŸ“æ ‘ï¼š<br>å°†æ„å»ºå¥½çš„ DOM æ ‘å’Œ CSSOM æ ‘åˆå¹¶ï¼Œå½¢æˆæ¸²æŸ“æ ‘ï¼ˆRender Treeï¼‰ã€‚<br>æ¸²æŸ“æ ‘åŒ…å«äº†éœ€è¦è¢«æ¸²æŸ“çš„èŠ‚ç‚¹å’Œå…¶æ ·å¼ä¿¡æ¯ï¼Œä½†ä¸åŒ…å«ä¸å¯è§çš„å…ƒç´ ï¼ˆä¾‹å¦‚ display: none çš„å…ƒç´ ï¼‰ã€‚</li>
<li>è®¡ç®—å¸ƒå±€ï¼ˆLayoutï¼‰ï¼š<br>æ ¹æ®æ¸²æŸ“æ ‘çš„ä¿¡æ¯ï¼Œè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸Šçš„ä½ç½®å’Œå¤§å°ã€‚<br>è®¡ç®—å¸ƒå±€è¿‡ç¨‹ä¹Ÿè¢«ç§°ä¸ºâ€œå›æµâ€ï¼ˆreflowï¼‰ã€‚</li>
<li>ç»˜åˆ¶ï¼ˆPaintï¼‰ï¼š<br>ä½¿ç”¨è®¡ç®—å¥½çš„å¸ƒå±€ä¿¡æ¯ï¼Œå°†é¡µé¢ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚<br>ç»˜åˆ¶è¿‡ç¨‹ä¹Ÿè¢«ç§°ä¸ºâ€œé‡ç»˜â€ï¼ˆrepaintï¼‰ã€‚</li>
<li>æ˜¾ç¤ºï¼ˆDisplayï¼‰ï¼š<br>å°†ç»˜åˆ¶çš„å†…å®¹æ˜¾ç¤ºåœ¨ç”¨æˆ·çš„å±å¹•ä¸Šã€‚</li>
</ol>
<h2 id="7-svg-æ ¼å¼äº†è§£"><a href="#7-svg-æ ¼å¼äº†è§£" class="headerlink" title="7. svg æ ¼å¼äº†è§£"></a>7. svg æ ¼å¼äº†è§£</h2><blockquote>
<p>å¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼ˆScalable Vector Graphicsï¼ŒSVGï¼‰åŸºäº XML æ ‡è®°è¯­è¨€ï¼Œç”¨äºæè¿°äºŒç»´çš„çŸ¢é‡å›¾å½¢</p>
</blockquote>
<p><strong>ç‰¹ç‚¹ï¼š</strong><br>SVG æ˜¯ä¸€ç§çµæ´»ã€å¯ä¼¸ç¼©ä¸”å¼ºå¤§çš„å›¾å½¢æè¿°è¯­è¨€ï¼Œç‰¹åˆ«é€‚åˆç”¨äº Web å¼€å‘ä¸­åˆ›å»ºå¯äº¤äº’çš„çŸ¢é‡å›¾å½¢</p>
<h2 id="8-JWT"><a href="#8-JWT" class="headerlink" title="8.JWT"></a>8.JWT</h2><blockquote>
<p>JWTï¼ˆJSON Web Tokenï¼‰æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†ï¼ˆRFC 7519ï¼‰ï¼Œç”¨äºåœ¨ç½‘ç»œä¸Šä»¥ JSON æ ¼å¼å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ã€‚JWT å¯ä»¥è¢«ç”¨äºèº«ä»½éªŒè¯ï¼ˆAuthenticationï¼‰å’Œä¿¡æ¯ä¼ é€’ï¼Œé€šå¸¸ç”¨äºé€šè¿‡ç½‘ç»œåœ¨ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨ç³»ç»Ÿä¹‹é—´è¿›è¡Œèº«ä»½éªŒè¯ã€‚</p>
</blockquote>
<h3 id="JWT-ç»„æˆ"><a href="#JWT-ç»„æˆ" class="headerlink" title="JWT ç»„æˆ"></a>JWT ç»„æˆ</h3><blockquote>
<p>JWT ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå®ƒä»¬é€šè¿‡ç‚¹å·ï¼ˆ.ï¼‰è¿æ¥åœ¨ä¸€èµ·ï¼šHeader.Payload.Signature</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//JWTç¼–ç </span><br>eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9<br>  .<span class="hljs-property">eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9</span><br>  .<span class="hljs-property">UQmqAUhUrpDVV2ST7mZKyLTomVfg7sYkEjmdDI5XF8Q</span><br></code></pre></td></tr></table></figure>

<h4 id="header-å¤´éƒ¨"><a href="#header-å¤´éƒ¨" class="headerlink" title="header(å¤´éƒ¨)"></a>header(å¤´éƒ¨)</h4><p>jwt çš„å¤´éƒ¨æ‰¿è½½ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š</p>
<ol>
<li>å£°æ˜ç±»å‹ï¼Œè¿™é‡Œæ˜¯ jwt</li>
<li>å£°æ˜åŠ å¯†çš„ç®—æ³• é€šå¸¸ç›´æ¥ä½¿ç”¨ HMAC SHA256</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-string">&#x27;typ&#x27;</span>: <span class="hljs-string">&#x27;JWT&#x27;</span>,<br>  <span class="hljs-string">&#x27;alg&#x27;</span>: <span class="hljs-string">&#x27;HS256&#x27;</span><br>&#125;<br><span class="hljs-comment">//base64ç¼–ç </span><br>eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9<br></code></pre></td></tr></table></figure>

<h4 id="playload-è½½è·"><a href="#playload-è½½è·" class="headerlink" title="playload(è½½è·)"></a>playload(è½½è·)</h4><p>æœ‰æ•ˆä¿¡æ¯åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†</p>
<ol>
<li>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</li>
<li>å…¬å…±çš„å£°æ˜</li>
<li>ç§æœ‰çš„å£°æ˜</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-string">&quot;sub&quot;</span>: <span class="hljs-string">&quot;1234567890&quot;</span>,<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,<br>  <span class="hljs-string">&quot;admin&quot;</span>: <span class="hljs-literal">true</span><br>&#125;<br><span class="hljs-comment">//base64ç¼–ç </span><br>eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9<br></code></pre></td></tr></table></figure>

<h4 id="signature-ç­¾è¯"><a href="#signature-ç­¾è¯" class="headerlink" title="signature(ç­¾è¯)"></a>signature(ç­¾è¯)</h4><p>ç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li>header (base64 åçš„)</li>
<li>payload (base64 åçš„)</li>
<li>secret</li>
</ol>
<p>è¿™ä¸ªéƒ¨åˆ†éœ€è¦ base64 åŠ å¯†åçš„ header å’Œ base64 åŠ å¯†åçš„ payload ä½¿ç”¨.è¿æ¥ç»„æˆçš„å­—ç¬¦ä¸²(å¤´éƒ¨åœ¨å‰)ï¼Œç„¶åé€šè¿‡ header ä¸­å£°æ˜çš„åŠ å¯†æ–¹å¼è¿›è¡ŒåŠ ç› secret ç»„åˆåŠ å¯†ï¼Œç„¶åå°±æ„æˆäº† jwt çš„ç¬¬ä¸‰éƒ¨åˆ†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">UQmqAUhUrpDVV</span>2ST7mZKyLTomVfg7sYkEjmdDI5XF8Q<br></code></pre></td></tr></table></figure>

<h3 id="JWT-è®¤è¯æµç¨‹"><a href="#JWT-è®¤è¯æµç¨‹" class="headerlink" title="JWT è®¤è¯æµç¨‹"></a>JWT è®¤è¯æµç¨‹</h3><ol>
<li>ç”¨æˆ·èº«ä»½éªŒè¯ï¼š<br>ç”¨æˆ·æä¾›èº«ä»½ä¿¡æ¯ï¼ˆä¾‹å¦‚ç”¨æˆ·åå’Œå¯†ç ï¼‰è¿›è¡Œèº«ä»½éªŒè¯ã€‚<br>æœåŠ¡å™¨éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼Œç”Ÿæˆ JWTã€‚</li>
<li>ç”Ÿæˆ JWTï¼š<br>æœåŠ¡å™¨ä½¿ç”¨ç”¨æˆ·çš„ä¿¡æ¯åˆ›å»ºä¸€ä¸ªåŒ…å«ç”¨æˆ·æ ‡è¯†çš„ JWTã€‚<br>JWT çš„ç»“æ„ä¸º Header.Payload.Signatureã€‚</li>
<li>è¿”å› JWTï¼š<br>æœåŠ¡å™¨å°†ç”Ÿæˆçš„ JWT è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>å®¢æˆ·ç«¯å­˜å‚¨ JWTï¼š<br>å®¢æˆ·ç«¯é€šå¸¸å°†æ”¶åˆ°çš„ JWT å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¾‹å¦‚åœ¨æµè§ˆå™¨çš„ localStorageã€sessionStorage ä¸­ï¼Œæˆ–è€…åœ¨ç§»åŠ¨åº”ç”¨ç¨‹åºçš„æœ¬åœ°å­˜å‚¨ä¸­ã€‚</li>
<li>åœ¨åç»­è¯·æ±‚ä¸­æºå¸¦ JWTï¼š<br>å®¢æˆ·ç«¯åœ¨åç»­çš„è¯·æ±‚ä¸­æºå¸¦ JWTï¼Œé€šå¸¸é€šè¿‡åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  Authorization å­—æ®µï¼Œå€¼ä¸º Bearer <JWT>ã€‚</JWT></li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">http<br>Copy code<br><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/data</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.com<br><span class="hljs-attribute">Authorization</span><span class="hljs-punctuation">: </span>Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...<br></code></pre></td></tr></table></figure>

<ol>
<li>æœåŠ¡å™¨éªŒè¯ JWTï¼š<br>æœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä»è¯·æ±‚å¤´ä¸­æå– JWTã€‚<br>æœåŠ¡å™¨ä½¿ç”¨äº‹å…ˆå…±äº«çš„å¯†é’¥ï¼ˆæˆ–å…¬é’¥ï¼Œå¯¹äºä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„æƒ…å†µï¼‰éªŒè¯ JWT çš„ç­¾åï¼Œç¡®ä¿ä»¤ç‰Œçš„çœŸå®æ€§ã€‚<br>å¦‚æœç­¾åéªŒè¯é€šè¿‡ï¼ŒæœåŠ¡å™¨è§£æ JWT ä¸­çš„è´Ÿè½½æ•°æ®ï¼Œè·å–ç”¨æˆ·ä¿¡æ¯ã€‚</li>
<li>å¤„ç†è¯·æ±‚ï¼š<br>æœåŠ¡å™¨æ ¹æ® JWT ä¸­çš„ç”¨æˆ·ä¿¡æ¯å¤„ç†è¯·æ±‚ï¼Œè¿›è¡Œç›¸åº”çš„æ“ä½œã€‚</li>
</ol>
<h2 id="9-NPM"><a href="#9-NPM" class="headerlink" title="9.NPM"></a>9.NPM</h2><blockquote>
<p>NPMï¼ˆNode Package Managerï¼‰æ˜¯ Node.js çš„åŒ…ç®¡ç†å·¥å…·ï¼Œç”¨äºå®‰è£…ã€å…±äº«ã€ç®¡ç† Node.js æ¨¡å—.</p>
</blockquote>
<p><strong>npm ç”±ä¸‰ä¸ªä¸åŒçš„ç»„ä»¶ç»„æˆï¼š</strong></p>
<ol>
<li>ç½‘ç«™</li>
<li>å‘½ä»¤è¡Œç•Œé¢ (CLI)</li>
<li>æ³¨å†Œè¡¨</li>
</ol>
<h2 id="10-HTTP-è¯·æ±‚å¤´ã€åè®®å¤´"><a href="#10-HTTP-è¯·æ±‚å¤´ã€åè®®å¤´" class="headerlink" title="10.HTTP è¯·æ±‚å¤´ã€åè®®å¤´"></a>10.HTTP è¯·æ±‚å¤´ã€åè®®å¤´</h2><h3 id="HTTP-è¯·æ±‚åŒ…æ‹¬ï¼š"><a href="#HTTP-è¯·æ±‚åŒ…æ‹¬ï¼š" class="headerlink" title="HTTP è¯·æ±‚åŒ…æ‹¬ï¼š"></a>HTTP è¯·æ±‚åŒ…æ‹¬ï¼š</h3><ol>
<li>è¯·æ±‚è¡Œï¼šè¯·æ±‚çš„ http æ–¹æ³•+URL+http çš„ç‰ˆæœ¬å·</li>
<li>è¯·æ±‚å¤´</li>
</ol>
<ol>
<li>Acceptï¼š è§ˆå™¨æ”¯æŒçš„ MIME åª’ä½“ç±»å‹, æ¯”å¦‚ text&#x2F;html,application&#x2F;json,image&#x2F;webp,&#x2F; ç­‰</li>
<li>Accept-Encoding: æµè§ˆå™¨å‘ç»™æœåŠ¡å™¨,å£°æ˜æµè§ˆå™¨æ”¯æŒçš„ç¼–ç ç±»å‹ï¼Œgzip, deflate</li>
<li>Accept-Language: å®¢æˆ·ç«¯æ¥å—çš„è¯­è¨€æ ¼å¼,æ¯”å¦‚ zh-CN</li>
<li>Connection: keep-alive , å¼€å¯ HTTP æŒä¹…è¿æ¥</li>
<li>Hostï¼šæœåŠ¡å™¨çš„åŸŸå</li>
<li>Originï¼šå‘Šè¯‰æœåŠ¡å™¨è¯·æ±‚ä»å“ªé‡Œå‘èµ·çš„ï¼Œä»…åŒ…æ‹¬åè®®å’ŒåŸŸå CORS è·¨åŸŸè¯·æ±‚ä¸­å¯ä»¥çœ‹åˆ° response æœ‰å¯¹åº”çš„ headerï¼ŒAccess-Control-Allow-Origin</li>
<li>Refererï¼šå‘Šè¯‰æœåŠ¡å™¨è¯·æ±‚çš„åŸå§‹èµ„æºçš„ URIï¼Œå…¶ç”¨äºæ‰€æœ‰ç±»å‹çš„è¯·æ±‚ï¼Œå¹¶ä¸”åŒ…æ‹¬ï¼šåè®®+åŸŸå+æŸ¥è¯¢å‚æ•°ï¼› å¾ˆå¤šæŠ¢è´­æœåŠ¡ä¼šç”¨è¿™ä¸ªåšé™åˆ¶ï¼Œå¿…é¡»é€šè¿‡æŸä¸ªå…¥æ¥è¿›æ¥æ‰æœ‰æ•ˆ</li>
<li>User-Agent: æœåŠ¡å™¨é€šè¿‡è¿™ä¸ªè¯·æ±‚å¤´åˆ¤æ–­ç”¨æˆ·çš„è½¯ä»¶çš„åº”ç”¨ç±»å‹ã€æ“ä½œç³»ç»Ÿã€è½¯ä»¶å¼€å‘å•†ä»¥åŠç‰ˆæœ¬å·ã€æµè§ˆå™¨å†…æ ¸ä¿¡æ¯ç­‰ï¼› é£æ§ç³»ç»Ÿã€åä½œå¼Šç³»ç»Ÿã€åçˆ¬è™«ç³»ç»Ÿç­‰åŸºæœ¬ä¼šé‡‡é›†è¿™ç±»ä¿¡æ¯åšå‚è€ƒ</li>
<li>Cookie: è¡¨ç¤ºæœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯ä¼ çš„ http è¯·æ±‚çŠ¶æ€,ä¹Ÿæ˜¯å¤šä¸ª key&#x3D;value å½¢å¼ç»„åˆï¼Œæ¯”å¦‚ç™»å½•åçš„ä»¤ç‰Œç­‰</li>
<li>Content-Typeï¼š HTTP è¯·æ±‚æäº¤çš„å†…å®¹ç±»å‹ï¼Œä¸€èˆ¬åªæœ‰ post æäº¤æ—¶æ‰éœ€è¦è®¾ç½®ï¼Œæ¯”å¦‚æ–‡ä»¶ä¸Šä¼ ï¼Œè¡¨å•æäº¤ç­‰ã€‚ç”¨æ¥æŒ‡å®šä¸åŒæ ¼å¼çš„è¯·æ±‚æ ¼å¼å“åº”ä¿¡æ¯ä¿—ç§° MIME åª’ä½“ç±»å‹</li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/path/to/resource</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>www.example.com<br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36<br><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8<br><span class="hljs-attribute">Accept-Language</span><span class="hljs-punctuation">: </span>en-US,en;q=0.9<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>è¯·æ±‚ä½“ï¼šï¼ˆkey&#x3D;valueï¼‰</li>
</ol>
<h3 id="HTTP-å“åº”åŒ…æ‹¬ï¼š"><a href="#HTTP-å“åº”åŒ…æ‹¬ï¼š" class="headerlink" title="HTTP å“åº”åŒ…æ‹¬ï¼š"></a>HTTP å“åº”åŒ…æ‹¬ï¼š</h3><ol>
<li>çŠ¶æ€è¡Œï¼šhttp åè®®çš„ç‰ˆæœ¬+çŠ¶æ€ç +æè¿°</li>
<li>å“åº”å¤´</li>
</ol>
<ol>
<li>Allow: æœåŠ¡å™¨æ”¯æŒå“ªäº›è¯·æ±‚æ–¹æ³•</li>
<li>Content-Length: å“åº”ä½“çš„å­—èŠ‚é•¿åº¦</li>
<li>Content-Type: å“åº”ä½“çš„ MIME ç±»å‹</li>
<li>Content-Encoding: è®¾ç½®æ•°æ®ä½¿ç”¨çš„ç¼–ç ç±»å‹</li>
<li>Date: è®¾ç½®æ¶ˆæ¯å‘é€çš„æ—¥æœŸå’Œæ—¶é—´</li>
<li>Expires: è®¾ç½®å“åº”ä½“çš„è¿‡æœŸæ—¶é—´,ä¸€ä¸ª GMT æ—¶é—´ï¼Œè¡¨ç¤ºè¯¥ç¼“å­˜çš„æœ‰æ•ˆæ—¶é—´</li>
<li>cache-control: Expires çš„ä½œç”¨ä¸€è‡´ï¼Œéƒ½æ˜¯æŒ‡æ˜å½“å‰èµ„æºçš„æœ‰æ•ˆæœŸ, æ§åˆ¶æµè§ˆå™¨æ˜¯å¦ç›´æ¥ä»æµè§ˆå™¨ç¼“å­˜å–æ•°æ®è¿˜æ˜¯é‡æ–°å‘è¯·æ±‚åˆ°æœåŠ¡å™¨å–æ•°æ®,ä¼˜å…ˆçº§é«˜äº Expires,æ§åˆ¶ç²’åº¦æ›´ç»†ï¼Œå¦‚ max-age&#x3D;240ï¼Œå³ 4 åˆ†é’Ÿ</li>
<li>Locationï¼šè¡¨ç¤ºå®¢æˆ·åº”å½“åˆ°å“ªé‡Œå»è·å–èµ„æºï¼Œä¸€èˆ¬åŒæ—¶è®¾ç½®çŠ¶æ€ä»£ç ä¸º 3xx</li>
<li>Server: æœåŠ¡å™¨åç§°</li>
<li>Transfer-Encodingï¼šchunked è¡¨ç¤ºè¾“å‡ºçš„å†…å®¹é•¿åº¦ä¸èƒ½ç¡®å®šï¼Œé™æ€ç½‘é¡µä¸€èˆ¬æ²¡ï¼ŒåŸºæœ¬å‡ºç°åœ¨åŠ¨æ€ç½‘é¡µé‡Œé¢</li>
<li>Access-Control-Allow-Origin: å®šå“ªäº›ç«™ç‚¹å¯ä»¥å‚ä¸è·¨ç«™èµ„æºå…±äº«</li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<br><span class="hljs-attribute">Date</span><span class="hljs-punctuation">: </span>Tue, 14 Sep 2021 12:00:00 GMT<br><span class="hljs-attribute">Server</span><span class="hljs-punctuation">: </span>Apache/2.4.41 (Unix)<br><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=utf-8<br><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>1234<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>å“åº”ä½“ï¼šweb æœåŠ¡å™¨æŠŠè¦å‘é€ç»™å®¢æˆ·ç«¯çš„æ–‡æ¡£ä¿¡æ¯æ”¾åœ¨å“åº”ä½“</li>
</ol>
<h2 id="11-æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶"><a href="#11-æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶" class="headerlink" title="11.æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶"></a>11.æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶</h2><h3 id="å¼ºç¼“å­˜"><a href="#å¼ºç¼“å­˜" class="headerlink" title="å¼ºç¼“å­˜"></a>å¼ºç¼“å­˜</h3><blockquote>
<p>å¼ºåˆ¶ç¼“å­˜å°±æ˜¯å‘æµè§ˆå™¨ç¼“å­˜æŸ¥æ‰¾è¯¥è¯·æ±‚ç»“æœï¼Œå¹¶æ ¹æ®è¯¥ç»“æœçš„ç¼“å­˜è§„åˆ™æ¥å†³å®šæ˜¯å¦ä½¿ç”¨è¯¥ç¼“å­˜ç»“æœçš„è¿‡ç¨‹</p>
</blockquote>
<h4 id="å¼ºåˆ¶ç¼“å­˜çš„æƒ…å†µä¸»è¦æœ‰ä¸‰ç§-æš‚ä¸åˆ†æåå•†ç¼“å­˜è¿‡ç¨‹-ï¼Œå¦‚ä¸‹ï¼š"><a href="#å¼ºåˆ¶ç¼“å­˜çš„æƒ…å†µä¸»è¦æœ‰ä¸‰ç§-æš‚ä¸åˆ†æåå•†ç¼“å­˜è¿‡ç¨‹-ï¼Œå¦‚ä¸‹ï¼š" class="headerlink" title="å¼ºåˆ¶ç¼“å­˜çš„æƒ…å†µä¸»è¦æœ‰ä¸‰ç§(æš‚ä¸åˆ†æåå•†ç¼“å­˜è¿‡ç¨‹)ï¼Œå¦‚ä¸‹ï¼š"></a>å¼ºåˆ¶ç¼“å­˜çš„æƒ…å†µä¸»è¦æœ‰ä¸‰ç§(æš‚ä¸åˆ†æåå•†ç¼“å­˜è¿‡ç¨‹)ï¼Œå¦‚ä¸‹ï¼š</h4><ol>
<li><p>ä¸å­˜åœ¨è¯¥ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œå¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œåˆ™ç›´æ¥å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚</p>
<img src="/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/q1.png" srcset="/img/loading.gif" lazyload class title="This is an test image">
</li>
<li><p>å­˜åœ¨è¯¥ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œä½†è¯¥ç»“æœå·²å¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œåˆ™ä½¿ç”¨åå•†ç¼“å­˜</p>
<img src="/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/q2.png" srcset="/img/loading.gif" lazyload class title="This is an test image">
</li>
<li><p>å­˜åœ¨è¯¥ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œä¸”è¯¥ç»“æœå°šæœªå¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜ç”Ÿæ•ˆï¼Œç›´æ¥è¿”å›è¯¥ç»“æœ</p>
<img src="/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/q3.png" srcset="/img/loading.gif" lazyload class title="This is an test image"></li>
</ol>
<h4 id="æ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æ˜¯-Expires-å’Œ-Cache-Control"><a href="#æ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æ˜¯-Expires-å’Œ-Cache-Control" class="headerlink" title="æ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æ˜¯ Expires å’Œ Cache-Control"></a>æ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æ˜¯ Expires å’Œ Cache-Control</h4><blockquote>
<p>å…¶ä¸­ Cache-Control ä¼˜å…ˆçº§æ¯” Expires é«˜</p>
</blockquote>
<ol>
<li>Expires: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œç”¨äºæŒ‡å®šèµ„æºçš„åˆ°æœŸæ—¶é—´ï¼Œæ˜¯æœåŠ¡å™¨ç«¯çš„å…·ä½“çš„æ—¶é—´ç‚¹ï¼Œå³åˆ°äº†è¿™ä¸ªæ—¶é—´ç‚¹ï¼Œç¼“å­˜å°±ä¼šå¤±æ•ˆï¼Œéœ€è¦é‡æ–°è¯·æ±‚</li>
<li>Cache-Control: æ§åˆ¶ç¼“å­˜çš„è¡Œä¸ºï¼Œæ¯”å¦‚ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œæ˜¯å¦éœ€è¦é‡æ–°éªŒè¯ï¼Œæ˜¯å¦éœ€è¦é‡æ–°è¯·æ±‚ç­‰</li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-attribute">Expires</span><span class="hljs-punctuation">: </span>Wed, 21 Oct 2021 07:28:00 GMT<br><span class="hljs-attribute">Cache-Control</span><span class="hljs-punctuation">: </span>max-age=31536000<br></code></pre></td></tr></table></figure>

<h3 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h3><blockquote>
<p>åå•†ç¼“å­˜å°±æ˜¯å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„è¿‡ç¨‹</p>
</blockquote>
<h4 id="ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š"><a href="#ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š" class="headerlink" title="ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š"></a>ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</h4><ol>
<li><p>åå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å› 304</p>
<img src="/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/x1.png" srcset="/img/loading.gif" lazyload class title="This is an test image">
</li>
<li><p>åå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å› 200 å’Œè¯·æ±‚ç»“æœç»“æœ</p>
<img src="/2024/01/30/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/interview-js-2/x2.png" srcset="/img/loading.gif" lazyload class title="This is an test image"></li>
</ol>
<h4 id="æ§åˆ¶åå•†ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æœ‰ï¼šLast-Modified-x2F-If-Modified-Since-å’Œ-Etag-x2F-If-None-Match"><a href="#æ§åˆ¶åå•†ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æœ‰ï¼šLast-Modified-x2F-If-Modified-Since-å’Œ-Etag-x2F-If-None-Match" class="headerlink" title="æ§åˆ¶åå•†ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æœ‰ï¼šLast-Modified &#x2F; If-Modified-Since å’Œ Etag &#x2F; If-None-Match"></a>æ§åˆ¶åå•†ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æœ‰ï¼šLast-Modified &#x2F; If-Modified-Since å’Œ Etag &#x2F; If-None-Match</h4><blockquote>
<p>å…¶ä¸­ Etag &#x2F; If-None-Match ä¼˜å…ˆçº§æ¯” Last-Modified &#x2F; If-Modified-Since é«˜</p>
</blockquote>
<ol>
<li>Last-Modified &#x2F; If-Modified-Since: æœåŠ¡å™¨åœ¨å“åº”è¯·æ±‚æ—¶ï¼Œå‘Šè¯‰æµè§ˆå™¨èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ï¼Œæµè§ˆå™¨ä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œé€šè¿‡è¯·æ±‚å¤´ If-Modified-Since æŠŠè¿™ä¸ªæ—¶é—´å‘é€ç»™æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªæ—¶é—´åˆ¤æ–­èµ„æºæ˜¯å¦ä¿®æ”¹è¿‡</li>
<li>Etag &#x2F; If-None-Match: Etag æ˜¯æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œè¿”å›å½“å‰èµ„æºæ–‡ä»¶çš„ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼ˆç”±æœåŠ¡å™¨ç”Ÿæˆï¼‰ï¼Œæµè§ˆå™¨ä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œé€šè¿‡è¯·æ±‚å¤´ If-None-Match æŠŠè¿™ä¸ªå”¯ä¸€æ ‡è¯†å‘é€ç»™æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå”¯ä¸€æ ‡è¯†åˆ¤æ–­èµ„æºæ˜¯å¦ä¿®æ”¹è¿‡</li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-attribute">Last-Modified</span><span class="hljs-punctuation">: </span>Wed, 21 Oct 2021 07:28:00 GMT<br><span class="hljs-attribute">If-Modified-Since</span><span class="hljs-punctuation">: </span>Wed, 21 Oct 2021 07:28:00 GMT<br><span class="hljs-attribute">Etag</span><span class="hljs-punctuation">: </span>&quot;5f8d9e9e-2a4d&quot;<br><span class="hljs-attribute">If-None-Match</span><span class="hljs-punctuation">: </span>&quot;5f8d9e9e-2a4d&quot;<br></code></pre></td></tr></table></figure>

<h2 id="12-åŒæºç­–ç•¥å’Œè·¨åŸŸ"><a href="#12-åŒæºç­–ç•¥å’Œè·¨åŸŸ" class="headerlink" title="12.åŒæºç­–ç•¥å’Œè·¨åŸŸ"></a>12.åŒæºç­–ç•¥å’Œè·¨åŸŸ</h2><h3 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h3><blockquote>
<p>åŒæºç­–ç•¥æ˜¯ä¸€ä¸ªé‡è¦çš„å®‰å…¨ç­–ç•¥ï¼Œå®ƒç”¨äºé™åˆ¶ä¸€ä¸ªæºçš„æ–‡æ¡£æˆ–è€…å®ƒåŠ è½½çš„è„šæœ¬å¦‚ä½•èƒ½ä¸å¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’<br>å¦‚æœä¸¤ä¸ª URL çš„åè®®ã€ç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šçš„è¯ï¼‰å’Œä¸»æœºéƒ½ç›¸åŒçš„è¯ï¼Œåˆ™è¿™ä¸¤ä¸ª URL æ˜¯åŒæºçš„</p>
</blockquote>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">http://store.company.com/dir2/other.html<br>åè®®ï¼šhttp<br>ä¸»æœºï¼šstore.company.com<br>ç«¯å£ï¼š80<br></code></pre></td></tr></table></figure>

<h3 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h3><h4 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h4><ol>
<li>åŸç†ï¼šåˆ©ç”¨<code>&lt;script&gt;</code>æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶ï¼Œé€šè¿‡<code>&lt;script&gt;</code>æ ‡ç­¾ src å±æ€§ï¼Œå‘é€å¸¦æœ‰ callback å‚æ•°çš„ GET è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å°†æ¥å£è¿”å›æ•°æ®æ‹¼å‡‘åˆ° callback å‡½æ•°ä¸­ï¼Œè¿”å›ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨è§£ææ‰§è¡Œï¼Œä»è€Œå‰ç«¯æ‹¿åˆ° callback å‡½æ•°è¿”å›çš„æ•°æ®.</li>
<li>ç¼ºç‚¹ï¼šåªèƒ½å‘é€ get ä¸€ç§è¯·æ±‚ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//åŸç”ŸJS</span><br><span class="hljs-keyword">var</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;script&#x27;</span>)<br>script.<span class="hljs-property">type</span> = <span class="hljs-string">&#x27;text/javascript&#x27;</span><br><br><span class="hljs-comment">// ä¼ å‚ä¸€ä¸ªå›è°ƒå‡½æ•°åç»™åç«¯ï¼Œæ–¹ä¾¿åç«¯è¿”å›æ—¶æ‰§è¡Œè¿™ä¸ªåœ¨å‰ç«¯å®šä¹‰çš„å›è°ƒå‡½æ•°</span><br>script.<span class="hljs-property">src</span> =<br>  <span class="hljs-string">&#x27;http://www.domain2.com:8080/login?user=admin&amp;callback=handleCallback&#x27;</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(script)<br><br><span class="hljs-comment">// å›è°ƒæ‰§è¡Œå‡½æ•°</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleCallback</span>(<span class="hljs-params">res</span>) &#123;<br>  <span class="hljs-title function_">alert</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(res))<br>&#125;<br><br><span class="hljs-comment">//Vue axios</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$http</span> = axios<br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$http</span><br>  .<span class="hljs-title function_">jsonp</span>(<span class="hljs-string">&#x27;http://www.domain2.com:8080/login&#x27;</span>, &#123;<br>    <span class="hljs-attr">params</span>: &#123;&#125;,<br>    <span class="hljs-attr">jsonp</span>: <span class="hljs-string">&#x27;handleCallback&#x27;</span>,<br>  &#125;)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>  &#125;)<br><br><span class="hljs-comment">//</span><br></code></pre></td></tr></table></figure>

<h4 id="CORSâ€è·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin-resource-sharingï¼‰"><a href="#CORSâ€è·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin-resource-sharingï¼‰" class="headerlink" title="CORSâ€è·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰"></a>CORSâ€è·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰</h4><ol>
<li>åŸç†ï¼šå®ƒå…è®¸æµè§ˆå™¨å‘è·¨æºæœåŠ¡å™¨ï¼Œå‘å‡º XMLHttpRequest è¯·æ±‚ï¼Œä»è€Œå…‹æœäº† AJAX åªèƒ½åŒæºä½¿ç”¨çš„é™åˆ¶</li>
<li>æ–¹æ³•ï¼šæœåŠ¡ç«¯éœ€è¦è®¾ç½®å“åº”å¤´ä¸­çš„ Access-Control-Allow-Origin å­—æ®µæ¥æŒ‡å®šå…è®¸çš„æºã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// æœåŠ¡ç«¯è®¾ç½® CORS</span><br><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>)<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>()<br><br>app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">header</span>(<span class="hljs-string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="hljs-string">&#x27;http://yourdomain.com&#x27;</span>)<br>  res.<span class="hljs-title function_">header</span>(<span class="hljs-string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="hljs-string">&#x27;GET, POST, PUT, DELETE&#x27;</span>)<br>  res.<span class="hljs-title function_">header</span>(<span class="hljs-string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="hljs-string">&#x27;Content-Type&#x27;</span>)<br>  <span class="hljs-title function_">next</span>()<br>&#125;)<br><br>app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/api/data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">json</span>(&#123; <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello, CORS!&#x27;</span> &#125;)<br>&#125;)<br><br>app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server is running on port 3000&#x27;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure>

<h4 id="ä»£ç†æœåŠ¡å™¨ï¼ˆProxyï¼‰"><a href="#ä»£ç†æœåŠ¡å™¨ï¼ˆProxyï¼‰" class="headerlink" title="ä»£ç†æœåŠ¡å™¨ï¼ˆProxyï¼‰:"></a>ä»£ç†æœåŠ¡å™¨ï¼ˆProxyï¼‰:</h4><p>åœ¨åŒåŸŸçš„æœåŠ¡å™¨ä¸Šè®¾ç½®ä¸€ä¸ªä»£ç†ï¼Œç”±ä»£ç†æœåŠ¡å™¨å»è¯·æ±‚å…¶ä»–åŸŸä¸Šçš„èµ„æºï¼Œå†å°†ç»“æœè¿”å›ç»™å‰ç«¯ã€‚è¿™æ ·ï¼Œå‰ç«¯åªéœ€è¦è¯·æ±‚åŒåŸŸçš„èµ„æºï¼Œå°±èƒ½é¿å…è·¨åŸŸé—®é¢˜ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">devServer</span>:&#123;<br>		<span class="hljs-attr">proxy</span>:&#123;<br>			<span class="hljs-comment">// è¯·æ±‚å‰ç¼€/apiï¼Œåªæœ‰åŠ äº†/apiå‰ç¼€çš„è¯·æ±‚æ‰ä¼šèµ°ä»£ç†(å‰ç«¯è‡ªå®šä¹‰)</span><br>			<span class="hljs-string">&#x27;/api&#x27;</span>:&#123;<br>				<span class="hljs-attr">target</span>:<span class="hljs-string">&#x27;http://localhost:5000&#x27;</span>,<br>				<span class="hljs-attr">pathReweite</span>:&#123;<span class="hljs-string">&#x27;^/api&#x27;</span>:<span class="hljs-string">&#x27;&#x27;</span>&#125;,<span class="hljs-comment">//é‡å†™</span><br>				<span class="hljs-comment">//ws:true,//ç”¨äºæ”¯æŒwebsocket</span><br>				<span class="hljs-attr">changeOrigin</span>:<span class="hljs-literal">true</span>,<span class="hljs-comment">//ç”¨äºæ§åˆ¶è¯·æ±‚å¤´ä¸­çš„hostå€¼ï¼Œé»˜è®¤trueï¼Œreactä¸­é»˜è®¤false</span><br>			&#125;<br>		&#125;<br>	&#125;<br></code></pre></td></tr></table></figure>

<h4 id="WebSocket-åè®®è·¨åŸŸ"><a href="#WebSocket-åè®®è·¨åŸŸ" class="headerlink" title="WebSocket åè®®è·¨åŸŸ"></a>WebSocket åè®®è·¨åŸŸ</h4><blockquote>
<p>å®ƒå®ç°äº†æµè§ˆå™¨ä¸æœåŠ¡å™¨å…¨åŒå·¥é€šä¿¡ï¼ŒåŒæ—¶å…è®¸è·¨åŸŸé€šè®¯</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>user inputï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.bootcss.com/socket.io/2.2.0/socket.io.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">var</span> socket = <span class="hljs-title function_">io</span>(<span class="hljs-string">&#x27;http://www.domain2.com:8080&#x27;</span>)</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// è¿æ¥æˆåŠŸå¤„ç†</span></span><br><span class="language-javascript">  socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connect&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// ç›‘å¬æœåŠ¡ç«¯æ¶ˆæ¯</span></span><br><span class="language-javascript">    socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">msg</span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;data from server: ---&gt; &#x27;</span> + msg)</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// ç›‘å¬æœåŠ¡ç«¯å…³é—­</span></span><br><span class="language-javascript">    socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;disconnect&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server socket has closed.&#x27;</span>)</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&#x27;input&#x27;</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">onblur</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    socket.<span class="hljs-title function_">send</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>)</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="13-é˜²æŠ–å’ŒèŠ‚æµ"><a href="#13-é˜²æŠ–å’ŒèŠ‚æµ" class="headerlink" title="13.é˜²æŠ–å’ŒèŠ‚æµ"></a>13.é˜²æŠ–å’ŒèŠ‚æµ</h2><p><strong>ä½œç”¨ï¼š</strong><br>æ§åˆ¶äº‹ä»¶è§¦å‘é¢‘ç‡çš„å‰ç«¯ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºæé«˜æ€§èƒ½å’Œé¿å…è¿‡åº¦é¢‘ç¹çš„å‡½æ•°è°ƒç”¨ã€‚</p>
<h3 id="é˜²æŠ–-Debouncing"><a href="#é˜²æŠ–-Debouncing" class="headerlink" title="é˜²æŠ–(Debouncing)"></a>é˜²æŠ–(Debouncing)</h3><blockquote>
<p>n ç§’ååœ¨æ‰§è¡Œè¯¥äº‹ä»¶ï¼Œè‹¥åœ¨ n ç§’å†…è¢«é‡å¤è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">func, delay</span>) &#123;<br>  <span class="hljs-keyword">let</span> timer<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) &#123;<br>    <span class="hljs-built_in">clearTimeout</span>(timer)<br><br>    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>    &#125;, delay)<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨ä¾‹å­</span><br><span class="hljs-keyword">const</span> debouncedFunction = <span class="hljs-title function_">debounce</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-comment">// æ‰§è¡Œéœ€è¦é˜²æŠ–çš„æ“ä½œ</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Debounced function executed&#x27;</span>)<br>&#125;, <span class="hljs-number">300</span>)<br><br><span class="hljs-comment">// åœ¨äº‹ä»¶å¤„ç†ä¸­ä½¿ç”¨</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;scroll&#x27;</span>, debouncedFunction)<br></code></pre></td></tr></table></figure>

<h3 id="èŠ‚æµ-Throttling"><a href="#èŠ‚æµ-Throttling" class="headerlink" title="èŠ‚æµ(Throttling)"></a>èŠ‚æµ(Throttling)</h3><blockquote>
<p>n ç§’å†…åªè¿è¡Œä¸€æ¬¡ï¼Œè‹¥åœ¨ n ç§’å†…é‡å¤è§¦å‘ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆ</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, delay</span>) &#123;<br>  <span class="hljs-keyword">let</span> lastExecTime = <span class="hljs-number">0</span><br><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) &#123;<br>    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()<br><br>    <span class="hljs-keyword">if</span> (now - lastExecTime &gt;= delay) &#123;<br>      func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>      lastExecTime = now<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨ä¾‹å­</span><br><span class="hljs-keyword">const</span> throttledFunction = <span class="hljs-title function_">throttle</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-comment">// æ‰§è¡Œéœ€è¦èŠ‚æµçš„æ“ä½œ</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Throttled function executed&#x27;</span>)<br>&#125;, <span class="hljs-number">300</span>)<br><br><span class="hljs-comment">// åœ¨äº‹ä»¶å¤„ç†ä¸­ä½¿ç”¨</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;scroll&#x27;</span>, throttledFunction)<br></code></pre></td></tr></table></figure>

<h2 id="14-JSON"><a href="#14-JSON" class="headerlink" title="14.JSON"></a>14.JSON</h2><blockquote>
<p>ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œç”¨äºåœ¨ä¸åŒè¯­è¨€ä¹‹é—´è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚</p>
</blockquote>
<p><strong>æ–¹æ³•:</strong><br>åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>JSON.parse()</code>æ–¹æ³•å°† JSON å­—ç¬¦ä¸²è§£æä¸º JavaScript å¯¹è±¡ï¼Œä½¿ç”¨ <code>JSON.stringify()</code> æ–¹æ³•å°† JavaScript å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ã€‚</p>
<h2 id="15-æ•°æ®è¿˜æ²¡æœ‰è¯·æ±‚è¿‡æ¥æ˜¯è¯¥æ€ä¹ˆåŠï¼Ÿ"><a href="#15-æ•°æ®è¿˜æ²¡æœ‰è¯·æ±‚è¿‡æ¥æ˜¯è¯¥æ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="15.æ•°æ®è¿˜æ²¡æœ‰è¯·æ±‚è¿‡æ¥æ˜¯è¯¥æ€ä¹ˆåŠï¼Ÿ"></a>15.æ•°æ®è¿˜æ²¡æœ‰è¯·æ±‚è¿‡æ¥æ˜¯è¯¥æ€ä¹ˆåŠï¼Ÿ</h2><ol>
<li>Loading çŠ¶æ€ï¼š æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼Œå‘ŠçŸ¥ç”¨æˆ·æ•°æ®æ­£åœ¨åŠ è½½ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡æ·»åŠ åŠ è½½åŠ¨ç”»ã€æ–‡æœ¬æˆ–å…¶ä»– UI å…ƒç´ æ¥å®ç°ã€‚ç”¨æˆ·ä¸€èˆ¬ä¼šç†è§£åœ¨ç­‰å¾…æ•°æ®åŠ è½½çš„è¿‡ç¨‹ä¸­å‡ºç°çš„çŸ­æ—¶æœŸçš„åŠ è½½çŠ¶æ€ã€‚</li>
<li>å ä½ç¬¦ï¼š åœ¨é¡µé¢ä¸Šä½¿ç”¨å ä½ç¬¦å…ƒç´ ï¼Œå ä½ç¬¦å…ƒç´ çš„æ ·å¼å’Œå¸ƒå±€åº”ä¸æœ€ç»ˆåŠ è½½çš„æ•°æ®å…ƒç´ ç›¸ä¼¼ï¼Œä½†å¯ä»¥ä½¿ç”¨ä¸€äº›æ ·å¼æˆ–æ–‡æœ¬æç¤ºæ¥è¡¨ç¤ºæ•°æ®æ­£åœ¨åŠ è½½ä¸­ã€‚è¿™å¯ä»¥é˜²æ­¢é¡µé¢åœ¨æ•°æ®åŠ è½½æ—¶å‘ç”Ÿå‰§çƒˆçš„å¸ƒå±€å˜åŒ–ã€‚</li>
<li>é»˜è®¤å€¼ï¼š æä¾›é»˜è®¤å€¼ä½œä¸ºå ä½æ•°æ®ï¼Œä»¥ç¡®ä¿é¡µé¢çš„ä¸€è‡´æ€§ã€‚å½“æ•°æ®åŠ è½½å®Œæˆåï¼Œå†ç”¨å®é™…çš„æ•°æ®æ›¿æ¢é»˜è®¤å€¼ã€‚è¿™å¯¹äºä¸€äº›ä¸æ˜¯å¿…éœ€åŠ è½½çš„æ•°æ®é¡¹æ¥è¯´æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</li>
<li>éª¨æ¶å±ï¼ˆSkeleton Screenï¼‰ï¼š ä½¿ç”¨éª¨æ¶å±æŠ€æœ¯ï¼Œä»¥é¡µé¢æ•´ä½“çš„å½¢å¼å±•ç¤ºæ•°æ®åŠ è½½ä¸­çš„çŠ¶æ€ã€‚éª¨æ¶å±æ˜¯ä¸€ä¸ªé¡µé¢çš„ç°åº¦ç‰ˆæœ¬ï¼Œç”¨äºæ¨¡æ‹Ÿé¡µé¢çš„å¸ƒå±€ç»“æ„ï¼Œè®©ç”¨æˆ·æ„ŸçŸ¥åˆ°é¡µé¢æ­£åœ¨åŠ è½½æ•°æ®ã€‚</li>
</ol>
<h2 id="16-æ— æ„Ÿç™»å½•"><a href="#16-æ— æ„Ÿç™»å½•" class="headerlink" title="16.æ— æ„Ÿç™»å½•"></a>16.æ— æ„Ÿç™»å½•</h2><blockquote>
<p>å‰ç«¯éœ€è¦å®ç° Token çš„è‡ªåŠ¨åˆ·æ–°æ¥é¿å…ç”¨æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å›  Token è¿‡æœŸè€Œéœ€è¦é‡æ–°ç™»å½•çš„æƒ…å†µ</p>
</blockquote>
<h3 id="1-ä½¿ç”¨-setInterval-å®šæ—¶åˆ·æ–°-Token"><a href="#1-ä½¿ç”¨-setInterval-å®šæ—¶åˆ·æ–°-Token" class="headerlink" title="1. ä½¿ç”¨ setInterval å®šæ—¶åˆ·æ–° Token"></a>1. ä½¿ç”¨ setInterval å®šæ—¶åˆ·æ–° Token</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-comment">// å‘åç«¯æœåŠ¡å™¨å‘é€è¯·æ±‚è·å–æ–°çš„Token</span><br>&#125;, <span class="hljs-number">59</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>)<br></code></pre></td></tr></table></figure>

<h3 id="2-ä½¿ç”¨-setTimeout-å»¶æ—¶åˆ·æ–°-Token"><a href="#2-ä½¿ç”¨-setTimeout-å»¶æ—¶åˆ·æ–°-Token" class="headerlink" title="2. ä½¿ç”¨ setTimeout å»¶æ—¶åˆ·æ–° Token"></a>2. ä½¿ç”¨ setTimeout å»¶æ—¶åˆ·æ–° Token</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-comment">// å‘åç«¯æœåŠ¡å™¨å‘é€è¯·æ±‚è·å–æ–°çš„Token</span><br>&#125;, tokenExpireTime - <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>)<br></code></pre></td></tr></table></figure>

<h3 id="3-ä½¿ç”¨-axios-æ‹¦æˆªå™¨è‡ªåŠ¨åˆ·æ–°-Token"><a href="#3-ä½¿ç”¨-axios-æ‹¦æˆªå™¨è‡ªåŠ¨åˆ·æ–°-Token" class="headerlink" title="3. ä½¿ç”¨ axios æ‹¦æˆªå™¨è‡ªåŠ¨åˆ·æ–° Token"></a>3. ä½¿ç”¨ axios æ‹¦æˆªå™¨è‡ªåŠ¨åˆ·æ–° Token</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">const</span> api = axios.<span class="hljs-title function_">create</span>(&#123;<br>  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;&lt;http://example.com/api&gt;&#x27;</span>,<br>  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>,<br>&#125;)<br><br>api.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<br>  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> tokenExpireTime = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;tokenExpireTime&#x27;</span>)<br>    <span class="hljs-keyword">if</span> (tokenExpireTime &amp;&amp; <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() &gt; tokenExpireTime) &#123;<br>      <span class="hljs-comment">// å‘åç«¯æœåŠ¡å™¨å‘é€è¯·æ±‚è·å–æ–°çš„Token</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> config<br>  &#125;,<br>  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)<br>  &#125;<br>)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> api<br></code></pre></td></tr></table></figure>

<h2 id="17-å¤§æ–‡ä»¶ä¸Šä¼ "><a href="#17-å¤§æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="17.å¤§æ–‡ä»¶ä¸Šä¼ "></a>17.å¤§æ–‡ä»¶ä¸Šä¼ </h2><h3 id="æ–‡ä»¶åˆ‡ç‰‡"><a href="#æ–‡ä»¶åˆ‡ç‰‡" class="headerlink" title="æ–‡ä»¶åˆ‡ç‰‡"></a>æ–‡ä»¶åˆ‡ç‰‡</h3><blockquote>
<p>å…ˆè·å–æ–‡ä»¶çš„äºŒè¿›åˆ¶å†…å®¹ï¼Œç„¶åå¯¹å…¶å†…å®¹è¿›è¡Œæ‹†åˆ†ï¼Œæœ€åå°†æ¯ä¸ªåˆ‡ç‰‡ä¸Šä¼ åˆ°æœåŠ¡ç«¯å³å¯</p>
</blockquote>
<ol>
<li>æ–¹æ³• 1: ä½¿ç”¨ FormData å’Œ XMLHttpRequest</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileInput&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;uploadFile()&quot;</span>&gt;</span>ä¸Šä¼ æ–‡ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadFile</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> fileInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;fileInput&#x27;</span>)</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> file = fileInput.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>]</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (file) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>()</span><br><span class="language-javascript">      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;file&#x27;</span>, file)</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()</span><br><span class="language-javascript">      xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;/upload&#x27;</span>, <span class="hljs-literal">true</span>)</span><br><span class="language-javascript"></span><br><span class="language-javascript">      xhr.<span class="hljs-property">upload</span>.<span class="hljs-property">onprogress</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// å¤„ç†ä¸Šä¼ è¿›åº¦</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> progress = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((e.<span class="hljs-property">loaded</span> / e.<span class="hljs-property">total</span>) * <span class="hljs-number">100</span>)</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Upload Progress: <span class="hljs-subst">$&#123;progress&#125;</span>%`</span>)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// å¤„ç†ä¸Šä¼ å®Œæˆçš„é€»è¾‘</span></span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Upload complete&#x27;</span>)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      xhr.<span class="hljs-title function_">send</span>(formData)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ–¹æ³• 2: ä½¿ç”¨ Fetch API</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileInput&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;uploadFile()&quot;</span>&gt;</span>ä¸Šä¼ æ–‡ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadFile</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> fileInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;fileInput&#x27;</span>)</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> file = fileInput.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>]</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (file) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>()</span><br><span class="language-javascript">      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;file&#x27;</span>, file)</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()</span><br><span class="language-javascript">      xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;/upload&#x27;</span>, <span class="hljs-literal">true</span>)</span><br><span class="language-javascript"></span><br><span class="language-javascript">      xhr.<span class="hljs-property">upload</span>.<span class="hljs-property">onprogress</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// å¤„ç†ä¸Šä¼ è¿›åº¦</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> progress = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((e.<span class="hljs-property">loaded</span> / e.<span class="hljs-property">total</span>) * <span class="hljs-number">100</span>)</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Upload Progress: <span class="hljs-subst">$&#123;progress&#125;</span>%`</span>)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// å¤„ç†ä¸Šä¼ å®Œæˆçš„é€»è¾‘</span></span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Upload complete&#x27;</span>)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      xhr.<span class="hljs-title function_">send</span>(formData)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="æ–­ç‚¹ç»­ä¼ "><a href="#æ–­ç‚¹ç»­ä¼ " class="headerlink" title="æ–­ç‚¹ç»­ä¼ "></a>æ–­ç‚¹ç»­ä¼ </h3><blockquote>
<p>åœ¨ä¸€äº›æš‚åœ&#x2F;æ¢å¤çš„ä¸Šä¼ åœºæ™¯ä¸‹ï¼Œéœ€è¦åœ¨ä¸Šä¸€æ¬¡çš„ä½ç½®æ¥ç€ä¸Šä¼ </p>
</blockquote>
<ol>
<li>æ–¹æ³• 1: ä½¿ç”¨ Blob å’Œ Slice</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fileInput&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;uploadFile()&quot;</span>&gt;</span>ä¸Šä¼ æ–‡ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadFile</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> fileInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;fileInput&#x27;</span>)</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> file = fileInput.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>]</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (file) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> chunkSize = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> <span class="hljs-comment">// æ¯æ¬¡ä¸Šä¼ çš„åˆ†ç‰‡å¤§å°ï¼ˆ1MBï¼‰</span></span><br><span class="language-javascript">      <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> <span class="hljs-title function_">uploadChunk</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> chunk = file.<span class="hljs-title function_">slice</span>(start, start + chunkSize)</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>()</span><br><span class="language-javascript">        formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;file&#x27;</span>, chunk)</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/upload&#x27;</span>, &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">body</span>: formData,</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">          .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.<span class="hljs-title function_">json</span>())</span><br><span class="language-javascript">          .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">// å¤„ç†ä¸Šä¼ å®Œæˆçš„é€»è¾‘</span></span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Upload complete&#x27;</span>, data)</span><br><span class="language-javascript">            start += chunkSize</span><br><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (start &lt; file.<span class="hljs-property">size</span>) &#123;</span><br><span class="language-javascript">              <span class="hljs-title function_">uploadChunk</span>() <span class="hljs-comment">// ç»§ç»­ä¸Šä¼ ä¸‹ä¸€åˆ†ç‰‡</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">          &#125;)</span><br><span class="language-javascript">          .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Upload failed&#x27;</span>, error)</span><br><span class="language-javascript">          &#125;)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-title function_">uploadChunk</span>() <span class="hljs-comment">// å¼€å§‹ä¸Šä¼ ç¬¬ä¸€ä¸ªåˆ†ç‰‡</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/interview-js-2/">#interview-js-2</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>interview-js-2</div>
      <div>http://example.com/2024/01/30/é¢è¯•çŸ¥è¯†ç‚¹/interview-js-2/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>å°æ—¥æœˆ</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2024å¹´1æœˆ30æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/02/01/%E9%9D%A2%E8%AF%95%E5%AE%9E%E6%88%98/%E8%85%BE%E8%AE%AF%E5%89%8D%E7%AB%AF%E4%B8%80%E9%9D%A2-id1/" title="è…¾è®¯å‰ç«¯ä¸€é¢-id1">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">è…¾è®¯å‰ç«¯ä¸€é¢-id1</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/01/22/%E9%9D%A2%E8%AF%95%E5%AE%9E%E6%88%98/%E5%AD%97%E8%8A%82%E4%BA%8C%E9%9D%A2-id2/" title="å­—èŠ‚äºŒé¢-id2">
                        <span class="hidden-mobile">å­—èŠ‚äºŒé¢-id2</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 


        <!-- æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ -->
        <div class="footer-content">
          <div>
            <span id="timeDate">è½½å…¥å¤©æ•°...</span>
            <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
            <script>
              var now = new Date();
              function createtime() {
                var grt = new Date("04/03/2020 00:00:00");//æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
                now.setTime(now.getTime() + 250);
                days = (now - grt) / 1000 / 60 / 60 / 24;
                dnum = Math.floor(days);
                hours = (now - grt) / 1000 / 60 / 60 - (24 * dnum);
                hnum = Math.floor(hours);
                if (String(hnum).length == 1) {
                  hnum = "0" + hnum;
                }
                minutes = (now - grt) / 1000 / 60 - (24 * 60 * dnum) - (60 * hnum);
                mnum = Math.floor(minutes);
                if (String(mnum).length == 1) {
                  mnum = "0" + mnum;
                }
                seconds = (now - grt) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
                snum = Math.round(seconds);
                if (String(snum).length == 1) {
                  snum = "0" + snum;
                }
                document.getElementById("timeDate").innerHTML = "ğŸš€ &nbsp" + dnum + "&nbspå¤©";  //æ­¤æ¬¡è‡ªå®šä¹‰æ˜¾ç¤ºå†…å®¹
                document.getElementById("times").innerHTML = hnum + "&nbspå°æ—¶&nbsp" + mnum + "&nbspåˆ†&nbsp" + snum + "&nbspç§’";
              }  //æ­¤æ¬¡è‡ªå®šä¹‰æ˜¾ç¤ºå†…å®¹
              setInterval("createtime()", 250);
            </script>
          </div>
        </div>


    </div>
    
      
        <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="busuanzi_value_site_pv"></span>
         æ¬¡
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="busuanzi_value_site_uv"></span>
         äºº
      </span>
    
    
  
</div>

          
            
                  
</div>
  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":true,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
